/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function e(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return e=>e in t}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={},o=[],n=()=>{},r=()=>!1,s=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),i=e=>e.startsWith("onUpdate:"),a=Object.assign,c=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},l=Object.prototype.hasOwnProperty,u=(e,t)=>l.call(e,t),d=Array.isArray,p=e=>"[object Map]"===C(e),f=e=>"[object Set]"===C(e),h=e=>"function"==typeof e,m=e=>"string"==typeof e,g=e=>"symbol"==typeof e,b=e=>null!==e&&"object"==typeof e,v=e=>(b(e)||h(e))&&h(e.then)&&h(e.catch),y=Object.prototype.toString,C=e=>y.call(e),S=e=>"[object Object]"===C(e),D=e=>m(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,_=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},I=/-\w/g,x=P(e=>e.replace(I,e=>e.slice(1).toUpperCase())),w=/\B([A-Z])/g,k=P(e=>e.replace(w,"-$1").toLowerCase()),T=P(e=>e.charAt(0).toUpperCase()+e.slice(1)),A=P(e=>e?`on${T(e)}`:""),E=(e,t)=>!Object.is(e,t),$=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},L=(e,t,o,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:o})},O=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let z;const F=()=>z||(z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function R(e){if(d(e)){const t={};for(let o=0;o<e.length;o++){const n=e[o],r=m(n)?G(n):R(n);if(r)for(const e in r)t[e]=r[e]}return t}if(m(e)||b(e))return e}const N=/;(?![^(]*\))/g,V=/:([^]+)/,M=/\/\*[^]*?\*\//g;function G(e){const t={};return e.replace(M,"").split(N).forEach(e=>{if(e){const o=e.split(V);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function j(e){let t="";if(m(e))t=e;else if(d(e))for(let o=0;o<e.length;o++){const n=j(e[o]);n&&(t+=n+" ")}else if(b(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const U=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function q(e){return!!e||""===e}const B=e=>!(!e||!0!==e.__v_isRef),J=e=>m(e)?e:null==e?"":d(e)||b(e)&&(e.toString===y||!h(e.toString))?B(e)?J(e.value):JSON.stringify(e,X,2):String(e),X=(e,t)=>B(t)?X(e,t.value):p(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,o],n)=>(e[W(t,n)+" =>"]=o,e),{})}:f(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>W(e))}:g(t)?W(t):!b(t)||d(t)||S(t)?t:String(t),W=(e,t="")=>{var o;return g(e)?`Symbol(${null!=(o=e.description)?o:t})`:e};
/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let H,K;class Z{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=H,!e&&H&&(this.index=(H.scopes||(H.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=H;try{return H=this,e()}finally{H=t}}}on(){1===++this._on&&(this.prevScope=H,H=this)}off(){this._on>0&&0===--this._on&&(H=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,o;for(this._active=!1,t=0,o=this.effects.length;t<o;t++)this.effects[t].stop();for(this.effects.length=0,t=0,o=this.cleanups.length;t<o;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}const Q=new WeakSet;class Y{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,H&&H.active&&H.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,Q.has(this)&&(Q.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||ne(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,ge(this),ie(this);const e=K,t=pe;K=this,pe=!0;try{return this.fn()}finally{ae(this),K=e,pe=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)ue(e);this.deps=this.depsTail=void 0,ge(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?Q.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ce(this)&&this.run()}get dirty(){return ce(this)}}let ee,te,oe=0;function ne(e,t=!1){if(e.flags|=8,t)return e.next=te,void(te=e);e.next=ee,ee=e}function re(){oe++}function se(){if(--oe>0)return;if(te){let e=te;for(te=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ee;){let o=ee;for(ee=void 0;o;){const n=o.next;if(o.next=void 0,o.flags&=-9,1&o.flags)try{o.trigger()}catch(t){e||(e=t)}o=n}}if(e)throw e}function ie(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ae(e){let t,o=e.depsTail,n=o;for(;n;){const e=n.prevDep;-1===n.version?(n===o&&(o=e),ue(n),de(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=e}e.deps=t,e.depsTail=o}function ce(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(le(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function le(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===be)return;if(e.globalVersion=be,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!ce(e)))return;e.flags|=2;const t=e.dep,o=K,n=pe;K=e,pe=!0;try{ie(e);const o=e.fn(e._value);(0===t.version||E(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(r){throw t.version++,r}finally{K=o,pe=n,ae(e),e.flags&=-3}}function ue(e,t=!1){const{dep:o,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),o.subs===e&&(o.subs=n,!n&&o.computed)){o.computed.flags&=-5;for(let e=o.computed.deps;e;e=e.nextDep)ue(e,!0)}t||--o.sc||!o.map||o.map.delete(o.key)}function de(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let pe=!0;const fe=[];function he(){fe.push(pe),pe=!1}function me(){const e=fe.pop();pe=void 0===e||e}function ge(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=K;K=void 0;try{t()}finally{K=e}}}let be=0;class ve{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ye{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!K||!pe||K===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==K)t=this.activeLink=new ve(K,this),K.deps?(t.prevDep=K.depsTail,K.depsTail.nextDep=t,K.depsTail=t):K.deps=K.depsTail=t,Ce(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=K.depsTail,t.nextDep=void 0,K.depsTail.nextDep=t,K.depsTail=t,K.deps===t&&(K.deps=e)}return t}trigger(e){this.version++,be++,this.notify(e)}notify(e){re();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{se()}}}function Ce(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Ce(e)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const Se=new WeakMap,De=Symbol(""),_e=Symbol(""),Pe=Symbol("");function Ie(e,t,o){if(pe&&K){let t=Se.get(e);t||Se.set(e,t=new Map);let n=t.get(o);n||(t.set(o,n=new ye),n.map=t,n.key=o),n.track()}}function xe(e,t,o,n,r,s){const i=Se.get(e);if(!i)return void be++;const a=e=>{e&&e.trigger()};if(re(),"clear"===t)i.forEach(a);else{const r=d(e),s=r&&D(o);if(r&&"length"===o){const e=Number(n);i.forEach((t,o)=>{("length"===o||o===Pe||!g(o)&&o>=e)&&a(t)})}else switch((void 0!==o||i.has(void 0))&&a(i.get(o)),s&&a(i.get(Pe)),t){case"add":r?s&&a(i.get("length")):(a(i.get(De)),p(e)&&a(i.get(_e)));break;case"delete":r||(a(i.get(De)),p(e)&&a(i.get(_e)));break;case"set":p(e)&&a(i.get(De))}}se()}function we(e){const t=pt(e);return t===e?t:(Ie(t,0,Pe),ut(e)?t:t.map(ft))}function ke(e){return Ie(e=pt(e),0,Pe),e}function Te(e,t){return lt(e)?ct(e)?ht(ft(t)):ht(t):ft(t)}const Ae={__proto__:null,[Symbol.iterator](){return Ee(this,Symbol.iterator,e=>Te(this,e))},concat(...e){return we(this).concat(...e.map(e=>d(e)?we(e):e))},entries(){return Ee(this,"entries",e=>(e[1]=Te(this,e[1]),e))},every(e,t){return Le(this,"every",e,t,void 0,arguments)},filter(e,t){return Le(this,"filter",e,t,e=>e.map(e=>Te(this,e)),arguments)},find(e,t){return Le(this,"find",e,t,e=>Te(this,e),arguments)},findIndex(e,t){return Le(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Le(this,"findLast",e,t,e=>Te(this,e),arguments)},findLastIndex(e,t){return Le(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Le(this,"forEach",e,t,void 0,arguments)},includes(...e){return ze(this,"includes",e)},indexOf(...e){return ze(this,"indexOf",e)},join(e){return we(this).join(e)},lastIndexOf(...e){return ze(this,"lastIndexOf",e)},map(e,t){return Le(this,"map",e,t,void 0,arguments)},pop(){return Fe(this,"pop")},push(...e){return Fe(this,"push",e)},reduce(e,...t){return Oe(this,"reduce",e,t)},reduceRight(e,...t){return Oe(this,"reduceRight",e,t)},shift(){return Fe(this,"shift")},some(e,t){return Le(this,"some",e,t,void 0,arguments)},splice(...e){return Fe(this,"splice",e)},toReversed(){return we(this).toReversed()},toSorted(e){return we(this).toSorted(e)},toSpliced(...e){return we(this).toSpliced(...e)},unshift(...e){return Fe(this,"unshift",e)},values(){return Ee(this,"values",e=>Te(this,e))}};function Ee(e,t,o){const n=ke(e),r=n[t]();return n===e||ut(e)||(r._next=r.next,r.next=()=>{const e=r._next();return e.done||(e.value=o(e.value)),e}),r}const $e=Array.prototype;function Le(e,t,o,n,r,s){const i=ke(e),a=i!==e&&!ut(e),c=i[t];if(c!==$e[t]){const t=c.apply(e,s);return a?ft(t):t}let l=o;i!==e&&(a?l=function(t,n){return o.call(this,Te(e,t),n,e)}:o.length>2&&(l=function(t,n){return o.call(this,t,n,e)}));const u=c.call(i,l,n);return a&&r?r(u):u}function Oe(e,t,o,n){const r=ke(e);let s=o;return r!==e&&(ut(e)?o.length>3&&(s=function(t,n,r){return o.call(this,t,n,r,e)}):s=function(t,n,r){return o.call(this,t,Te(e,n),r,e)}),r[t](s,...n)}function ze(e,t,o){const n=pt(e);Ie(n,0,Pe);const r=n[t](...o);return-1!==r&&!1!==r||!dt(o[0])?r:(o[0]=pt(o[0]),n[t](...o))}function Fe(e,t,o=[]){he(),re();const n=pt(e)[t].apply(e,o);return se(),me(),n}const Re=e("__proto__,__v_isRef,__isVue"),Ne=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(g));function Ve(e){g(e)||(e=String(e));const t=pt(this);return Ie(t,0,e),t.hasOwnProperty(e)}class Me{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,o){if("__v_skip"===t)return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if("__v_isReactive"===t)return!n;if("__v_isReadonly"===t)return n;if("__v_isShallow"===t)return r;if("__v_raw"===t)return o===(n?r?nt:ot:r?tt:et).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(o)?e:void 0;const s=d(e);if(!n){let e;if(s&&(e=Ae[t]))return e;if("hasOwnProperty"===t)return Ve}const i=Reflect.get(e,t,mt(e)?e:o);if(g(t)?Ne.has(t):Re(t))return i;if(n||Ie(e,0,t),r)return i;if(mt(i)){const e=s&&D(t)?i:i.value;return n&&b(e)?it(e):e}return b(i)?n?it(i):st(i):i}}class Ge extends Me{constructor(e=!1){super(!1,e)}set(e,t,o,n){let r=e[t];const s=d(e)&&D(t);if(!this._isShallow){const e=lt(r);if(ut(o)||lt(o)||(r=pt(r),o=pt(o)),!s&&mt(r)&&!mt(o))return e||(r.value=o),!0}const i=s?Number(t)<e.length:u(e,t),a=Reflect.set(e,t,o,mt(e)?e:n);return e===pt(n)&&(i?E(o,r)&&xe(e,"set",t,o):xe(e,"add",t,o)),a}deleteProperty(e,t){const o=u(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&o&&xe(e,"delete",t,void 0),n}has(e,t){const o=Reflect.has(e,t);return g(t)&&Ne.has(t)||Ie(e,0,t),o}ownKeys(e){return Ie(e,0,d(e)?"length":De),Reflect.ownKeys(e)}}class je extends Me{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Ue=new Ge,qe=new je,Be=new Ge(!0),Je=e=>e,Xe=e=>Reflect.getPrototypeOf(e);function We(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function He(e,t){const o={get(o){const n=this.__v_raw,r=pt(n),s=pt(o);e||(E(o,s)&&Ie(r,0,o),Ie(r,0,s));const{has:i}=Xe(r),a=t?Je:e?ht:ft;return i.call(r,o)?a(n.get(o)):i.call(r,s)?a(n.get(s)):void(n!==r&&n.get(o))},get size(){const t=this.__v_raw;return!e&&Ie(pt(t),0,De),t.size},has(t){const o=this.__v_raw,n=pt(o),r=pt(t);return e||(E(t,r)&&Ie(n,0,t),Ie(n,0,r)),t===r?o.has(t):o.has(t)||o.has(r)},forEach(o,n){const r=this,s=r.__v_raw,i=pt(s),a=t?Je:e?ht:ft;return!e&&Ie(i,0,De),s.forEach((e,t)=>o.call(n,a(e),a(t),r))}};a(o,e?{add:We("add"),set:We("set"),delete:We("delete"),clear:We("clear")}:{add(e){t||ut(e)||lt(e)||(e=pt(e));const o=pt(this);return Xe(o).has.call(o,e)||(o.add(e),xe(o,"add",e,e)),this},set(e,o){t||ut(o)||lt(o)||(o=pt(o));const n=pt(this),{has:r,get:s}=Xe(n);let i=r.call(n,e);i||(e=pt(e),i=r.call(n,e));const a=s.call(n,e);return n.set(e,o),i?E(o,a)&&xe(n,"set",e,o):xe(n,"add",e,o),this},delete(e){const t=pt(this),{has:o,get:n}=Xe(t);let r=o.call(t,e);r||(e=pt(e),r=o.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return r&&xe(t,"delete",e,void 0),s},clear(){const e=pt(this),t=0!==e.size,o=e.clear();return t&&xe(e,"clear",void 0,void 0),o}});return["keys","values","entries",Symbol.iterator].forEach(n=>{o[n]=function(e,t,o){return function(...n){const r=this.__v_raw,s=pt(r),i=p(s),a="entries"===e||e===Symbol.iterator&&i,c="keys"===e&&i,l=r[e](...n),u=o?Je:t?ht:ft;return!t&&Ie(s,0,c?_e:De),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(n,e,t)}),o}function Ke(e,t){const o=He(e,t);return(t,n,r)=>"__v_isReactive"===n?!e:"__v_isReadonly"===n?e:"__v_raw"===n?t:Reflect.get(u(o,n)&&n in t?o:t,n,r)}const Ze={get:Ke(!1,!1)},Qe={get:Ke(!1,!0)},Ye={get:Ke(!0,!1)},et=new WeakMap,tt=new WeakMap,ot=new WeakMap,nt=new WeakMap;function rt(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>C(e).slice(8,-1))(e))}function st(e){return lt(e)?e:at(e,!1,Ue,Ze,et)}function it(e){return at(e,!0,qe,Ye,ot)}function at(e,t,o,n,r){if(!b(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=rt(e);if(0===s)return e;const i=r.get(e);if(i)return i;const a=new Proxy(e,2===s?n:o);return r.set(e,a),a}function ct(e){return lt(e)?ct(e.__v_raw):!(!e||!e.__v_isReactive)}function lt(e){return!(!e||!e.__v_isReadonly)}function ut(e){return!(!e||!e.__v_isShallow)}function dt(e){return!!e&&!!e.__v_raw}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}const ft=e=>b(e)?st(e):e,ht=e=>b(e)?it(e):e;function mt(e){return!!e&&!0===e.__v_isRef}const gt={get:(e,t,o)=>{return"__v_raw"===t?e:mt(n=Reflect.get(e,t,o))?n.value:n;var n},set:(e,t,o,n)=>{const r=e[t];return mt(r)&&!mt(o)?(r.value=o,!0):Reflect.set(e,t,o,n)}};function bt(e){return ct(e)?e:new Proxy(e,gt)}class vt{constructor(e,t,o){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ye(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=be-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=o}notify(){if(this.flags|=16,!(8&this.flags)&&K!==this)return ne(this,!0),!0}get value(){const e=this.dep.track();return le(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const yt={},Ct=new WeakMap;let St;function Dt(e,o,r=t){const{immediate:s,deep:i,once:a,scheduler:l,augmentJob:u,call:p}=r,f=e=>i?e:ut(e)||!1===i||0===i?_t(e,1):_t(e);let m,g,b,v,y=!1,C=!1;if(mt(e)?(g=()=>e.value,y=ut(e)):ct(e)?(g=()=>f(e),y=!0):d(e)?(C=!0,y=e.some(e=>ct(e)||ut(e)),g=()=>e.map(e=>mt(e)?e.value:ct(e)?f(e):h(e)?p?p(e,2):e():void 0)):g=h(e)?o?p?()=>p(e,2):e:()=>{if(b){he();try{b()}finally{me()}}const t=St;St=m;try{return p?p(e,3,[v]):e(v)}finally{St=t}}:n,o&&i){const e=g,t=!0===i?1/0:i;g=()=>_t(e(),t)}const S=H,D=()=>{m.stop(),S&&S.active&&c(S.effects,m)};if(a&&o){const e=o;o=(...t)=>{e(...t),D()}}let _=C?new Array(e.length).fill(yt):yt;const P=e=>{if(1&m.flags&&(m.dirty||e))if(o){const e=m.run();if(i||y||(C?e.some((e,t)=>E(e,_[t])):E(e,_))){b&&b();const t=St;St=m;try{const t=[e,_===yt?void 0:C&&_[0]===yt?[]:_,v];_=e,p?p(o,3,t):o(...t)}finally{St=t}}}else m.run()};return u&&u(P),m=new Y(g),m.scheduler=l?()=>l(P,!1):P,v=e=>function(e,t=!1,o=St){if(o){let t=Ct.get(o);t||Ct.set(o,t=[]),t.push(e)}}(e,!1,m),b=m.onStop=()=>{const e=Ct.get(m);if(e){if(p)p(e,4);else for(const t of e)t();Ct.delete(m)}},o?s?P(!0):_=m.run():l?l(P.bind(null,!0),!0):m.run(),D.pause=m.pause.bind(m),D.resume=m.resume.bind(m),D.stop=D,D}function _t(e,t=1/0,o){if(t<=0||!b(e)||e.__v_skip)return e;if(((o=o||new Map).get(e)||0)>=t)return e;if(o.set(e,t),t--,mt(e))_t(e.value,t,o);else if(d(e))for(let n=0;n<e.length;n++)_t(e[n],t,o);else if(f(e)||p(e))e.forEach(e=>{_t(e,t,o)});else if(S(e)){for(const n in e)_t(e[n],t,o);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&_t(e[n],t,o)}return e}
/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pt(e,t,o,n){try{return n?e(...n):e()}catch(r){xt(r,t,o)}}function It(e,t,o,n){if(h(e)){const r=Pt(e,t,o,n);return r&&v(r)&&r.catch(e=>{xt(e,t,o)}),r}if(d(e)){const r=[];for(let s=0;s<e.length;s++)r.push(It(e[s],t,o,n));return r}}function xt(e,o,n,r=!0){o&&o.vnode;const{errorHandler:s,throwUnhandledErrorInProduction:i}=o&&o.appContext.config||t;if(o){let t=o.parent;const r=o.proxy,i=`https://vuejs.org/error-reference/#runtime-${n}`;for(;t;){const o=t.ec;if(o)for(let t=0;t<o.length;t++)if(!1===o[t](e,r,i))return;t=t.parent}if(s)return he(),Pt(s,null,10,[e,r,i]),void me()}!function(e,t,o,n=!0,r=!1){if(r)throw e;console.error(e)}(e,0,0,r,i)}const wt=[];let kt=-1;const Tt=[];let At=null,Et=0;const $t=Promise.resolve();let Lt=null;function Ot(e){const t=Lt||$t;return e?t.then(this?e.bind(this):e):t}function zt(e){if(!(1&e.flags)){const t=Vt(e),o=wt[wt.length-1];!o||!(2&e.flags)&&t>=Vt(o)?wt.push(e):wt.splice(function(e){let t=kt+1,o=wt.length;for(;t<o;){const n=t+o>>>1,r=wt[n],s=Vt(r);s<e||s===e&&2&r.flags?t=n+1:o=n}return t}(t),0,e),e.flags|=1,Ft()}}function Ft(){Lt||(Lt=$t.then(Mt))}function Rt(e,t,o=kt+1){for(;o<wt.length;o++){const t=wt[o];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;wt.splice(o,1),o--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function Nt(e){if(Tt.length){const e=[...new Set(Tt)].sort((e,t)=>Vt(e)-Vt(t));if(Tt.length=0,At)return void At.push(...e);for(At=e,Et=0;Et<At.length;Et++){const e=At[Et];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}At=null,Et=0}}const Vt=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Mt(e){try{for(kt=0;kt<wt.length;kt++){const e=wt[kt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Pt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;kt<wt.length;kt++){const e=wt[kt];e&&(e.flags&=-2)}kt=-1,wt.length=0,Nt(),Lt=null,(wt.length||Tt.length)&&Mt()}}let Gt=null,jt=null;function Ut(e){const t=Gt;return Gt=e,jt=e&&e.type.__scopeId||null,t}function qt(e,o){if(null===Gt)return e;const n=lr(Gt),r=e.dirs||(e.dirs=[]);for(let s=0;s<o.length;s++){let[e,i,a,c=t]=o[s];e&&(h(e)&&(e={mounted:e,updated:e}),e.deep&&_t(i),r.push({dir:e,instance:n,value:i,oldValue:void 0,arg:a,modifiers:c}))}return e}function Bt(e,t,o,n){const r=e.dirs,s=t&&t.dirs;for(let i=0;i<r.length;i++){const a=r[i];s&&(a.oldValue=s[i].value);let c=a.dir[n];c&&(he(),It(c,o,8,[e.el,a,e,t]),me())}}function Jt(e,t,o=!1){const n=Yn();if(n||Jo){let r=Jo?Jo._context.provides:n?null==n.parent||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return o&&h(t)?t.call(n&&n.proxy):t}}const Xt=Symbol.for("v-scx");function Wt(e,t,o){return Ht(e,t,o)}function Ht(e,o,r=t){const{immediate:s,deep:i,flush:c,once:l}=r,u=a({},r),d=o&&s||!o&&"post"!==c;let p;if(sr)if("sync"===c){const e=Jt(Xt);p=e.__watcherHandles||(e.__watcherHandles=[])}else if(!d){const e=()=>{};return e.stop=n,e.resume=n,e.pause=n,e}const f=Qn;u.call=(e,t,o)=>It(e,f,t,o);let h=!1;"post"===c?u.scheduler=e=>{bn(e,f&&f.suspense)}:"sync"!==c&&(h=!0,u.scheduler=(e,t)=>{t?e():zt(e)}),u.augmentJob=e=>{o&&(e.flags|=4),h&&(e.flags|=2,f&&(e.id=f.uid,e.i=f))};const m=Dt(e,o,u);return sr&&(p?p.push(m):d&&m()),m}function Kt(e,t,o){const n=this.proxy,r=m(e)?e.includes(".")?Zt(n,e):()=>n[e]:e.bind(n,n);let s;h(t)?s=t:(s=t.handler,o=t);const i=or(this),a=Ht(r,s.bind(n),o);return i(),a}function Zt(e,t){const o=t.split(".");return()=>{let t=e;for(let e=0;e<o.length&&t;e++)t=t[o[e]];return t}}const Qt=Symbol("_vte"),Yt=Symbol("_leaveCb");function eo(e,t){6&e.shapeFlag&&e.component?(e.transition=t,eo(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function to(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const oo=new WeakMap;function no(e,o,n,s,i=!1){if(d(e))return void e.forEach((e,t)=>no(e,o&&(d(o)?o[t]:o),n,s,i));if(so(s)&&!i)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&no(e,o,n,s.component.subTree));const a=4&s.shapeFlag?lr(s.component):s.el,l=i?null:a,{i:p,r:f}=e,g=o&&o.r,b=p.refs===t?p.refs={}:p.refs,v=p.setupState,y=pt(v),C=v===t?r:e=>u(y,e);if(null!=g&&g!==f)if(ro(o),m(g))b[g]=null,C(g)&&(v[g]=null);else if(mt(g)){g.value=null;const e=o;e.k&&(b[e.k]=null)}if(h(f))Pt(f,p,12,[l,b]);else{const t=m(f),o=mt(f);if(t||o){const r=()=>{if(e.f){const o=t?C(f)?v[f]:b[f]:f.value;if(i)d(o)&&c(o,a);else if(d(o))o.includes(a)||o.push(a);else if(t)b[f]=[a],C(f)&&(v[f]=b[f]);else{const t=[a];f.value=t,e.k&&(b[e.k]=t)}}else t?(b[f]=l,C(f)&&(v[f]=l)):o&&(f.value=l,e.k&&(b[e.k]=l))};if(l){const t=()=>{r(),oo.delete(e)};t.id=-1,oo.set(e,t),bn(t,n)}else ro(e),r()}}}function ro(e){const t=oo.get(e);t&&(t.flags|=8,oo.delete(e))}F().requestIdleCallback,F().cancelIdleCallback;const so=e=>!!e.type.__asyncLoader,io=e=>e.type.__isKeepAlive;function ao(e,t){lo(e,"a",t)}function co(e,t){lo(e,"da",t)}function lo(e,t,o=Qn){const n=e.__wdc||(e.__wdc=()=>{let t=o;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(po(t,n,o),o){let e=o.parent;for(;e&&e.parent;)io(e.parent.vnode)&&uo(n,t,o,e),e=e.parent}}function uo(e,t,o,n){const r=po(t,e,n,!0);yo(()=>{c(n[t],r)},o)}function po(e,t,o=Qn,n=!1){if(o){const r=o[e]||(o[e]=[]),s=t.__weh||(t.__weh=(...n)=>{he();const r=or(o),s=It(t,o,e,n);return r(),me(),s});return n?r.unshift(s):r.push(s),s}}const fo=e=>(t,o=Qn)=>{sr&&"sp"!==e||po(e,(...e)=>t(...e),o)},ho=fo("bm"),mo=fo("m"),go=fo("bu"),bo=fo("u"),vo=fo("bum"),yo=fo("um"),Co=fo("sp"),So=fo("rtg"),Do=fo("rtc");function _o(e,t=Qn){po("ec",e,t)}const Po=Symbol.for("v-ndc");function Io(e,t,o,n){let r;const s=o,i=d(e);if(i||m(e)){let o=!1,n=!1;i&&ct(e)&&(o=!ut(e),n=lt(e),e=ke(e)),r=new Array(e.length);for(let i=0,a=e.length;i<a;i++)r[i]=t(o?n?ht(ft(e[i])):ft(e[i]):e[i],i,void 0,s)}else if("number"==typeof e){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,s)}else if(b(e))if(e[Symbol.iterator])r=Array.from(e,(e,o)=>t(e,o,void 0,s));else{const o=Object.keys(e);r=new Array(o.length);for(let n=0,i=o.length;n<i;n++){const i=o[n];r[n]=t(e[i],i,n,s)}}else r=[];return r}const xo=e=>e?rr(e)?lr(e):xo(e.parent):null,wo=a(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xo(e.parent),$root:e=>xo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zo(e),$forceUpdate:e=>e.f||(e.f=()=>{zt(e.update)}),$nextTick:e=>e.n||(e.n=Ot.bind(e.proxy)),$watch:e=>Kt.bind(e)}),ko=(e,o)=>e!==t&&!e.__isScriptSetup&&u(e,o),To={get({_:e},o){if("__v_skip"===o)return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:c,appContext:l}=e;if("$"!==o[0]){const e=a[o];if(void 0!==e)switch(e){case 1:return r[o];case 2:return s[o];case 4:return n[o];case 3:return i[o]}else{if(ko(r,o))return a[o]=1,r[o];if(s!==t&&u(s,o))return a[o]=2,s[o];if(u(i,o))return a[o]=3,i[o];if(n!==t&&u(n,o))return a[o]=4,n[o];Eo&&(a[o]=0)}}const d=wo[o];let p,f;return d?("$attrs"===o&&Ie(e.attrs,0,""),d(e)):(p=c.__cssModules)&&(p=p[o])?p:n!==t&&u(n,o)?(a[o]=4,n[o]):(f=l.config.globalProperties,u(f,o)?f[o]:void 0)},set({_:e},o,n){const{data:r,setupState:s,ctx:i}=e;return ko(s,o)?(s[o]=n,!0):r!==t&&u(r,o)?(r[o]=n,!0):!u(e.props,o)&&(("$"!==o[0]||!(o.slice(1)in e))&&(i[o]=n,!0))},has({_:{data:e,setupState:o,accessCache:n,ctx:r,appContext:s,props:i,type:a}},c){let l;return!!(n[c]||e!==t&&"$"!==c[0]&&u(e,c)||ko(o,c)||u(i,c)||u(r,c)||u(wo,c)||u(s.config.globalProperties,c)||(l=a.__cssModules)&&l[c])},defineProperty(e,t,o){return null!=o.get?e._.accessCache[t]=0:u(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function Ao(e){return d(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let Eo=!0;function $o(e){const t=zo(e),o=e.proxy,r=e.ctx;Eo=!1,t.beforeCreate&&Lo(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:c,provide:l,inject:u,created:p,beforeMount:f,mounted:m,beforeUpdate:g,updated:v,activated:y,deactivated:C,beforeDestroy:S,beforeUnmount:D,destroyed:_,unmounted:P,render:I,renderTracked:x,renderTriggered:w,errorCaptured:k,serverPrefetch:T,expose:A,inheritAttrs:E,components:$,directives:L,filters:O}=t;if(u&&function(e,t){d(e)&&(e=Vo(e));for(const o in e){const n=e[o];let r;r=b(n)?"default"in n?Jt(n.from||o,n.default,!0):Jt(n.from||o):Jt(n),mt(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[o]=r}}(u,r,null),a)for(const n in a){const e=a[n];h(e)&&(r[n]=e.bind(o))}if(s){const t=s.call(o,o);b(t)&&(e.data=st(t))}if(Eo=!0,i)for(const d in i){const e=i[d],t=h(e)?e.bind(o,o):h(e.get)?e.get.bind(o,o):n,s=!h(e)&&h(e.set)?e.set.bind(o):n,a=ur({get:t,set:s});Object.defineProperty(r,d,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(const n in c)Oo(c[n],r,o,n);if(l){const e=h(l)?l.call(o):l;Reflect.ownKeys(e).forEach(t=>{!function(e,t){if(Qn){let o=Qn.provides;const n=Qn.parent&&Qn.parent.provides;n===o&&(o=Qn.provides=Object.create(n)),o[e]=t}}(t,e[t])})}function z(e,t){d(t)?t.forEach(t=>e(t.bind(o))):t&&e(t.bind(o))}if(p&&Lo(p,e,"c"),z(ho,f),z(mo,m),z(go,g),z(bo,v),z(ao,y),z(co,C),z(_o,k),z(Do,x),z(So,w),z(vo,D),z(yo,P),z(Co,T),d(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach(e=>{Object.defineProperty(t,e,{get:()=>o[e],set:t=>o[e]=t,enumerable:!0})})}else e.exposed||(e.exposed={});I&&e.render===n&&(e.render=I),null!=E&&(e.inheritAttrs=E),$&&(e.components=$),L&&(e.directives=L),T&&to(e)}function Lo(e,t,o){It(d(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,o)}function Oo(e,t,o,n){let r=n.includes(".")?Zt(o,n):()=>o[n];if(m(e)){const o=t[e];h(o)&&Wt(r,o)}else if(h(e))Wt(r,e.bind(o));else if(b(e))if(d(e))e.forEach(e=>Oo(e,t,o,n));else{const n=h(e.handler)?e.handler.bind(o):t[e.handler];h(n)&&Wt(r,n,e)}}function zo(e){const t=e.type,{mixins:o,extends:n}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:i}}=e.appContext,a=s.get(t);let c;return a?c=a:r.length||o||n?(c={},r.length&&r.forEach(e=>Fo(c,e,i,!0)),Fo(c,t,i)):c=t,b(t)&&s.set(t,c),c}function Fo(e,t,o,n=!1){const{mixins:r,extends:s}=t;s&&Fo(e,s,o,!0),r&&r.forEach(t=>Fo(e,t,o,!0));for(const i in t)if(n&&"expose"===i);else{const n=Ro[i]||o&&o[i];e[i]=n?n(e[i],t[i]):t[i]}return e}const Ro={data:No,props:jo,emits:jo,methods:Go,computed:Go,beforeCreate:Mo,created:Mo,beforeMount:Mo,mounted:Mo,beforeUpdate:Mo,updated:Mo,beforeDestroy:Mo,beforeUnmount:Mo,destroyed:Mo,unmounted:Mo,activated:Mo,deactivated:Mo,errorCaptured:Mo,serverPrefetch:Mo,components:Go,directives:Go,watch:function(e,t){if(!e)return t;if(!t)return e;const o=a(Object.create(null),e);for(const n in t)o[n]=Mo(e[n],t[n]);return o},provide:No,inject:function(e,t){return Go(Vo(e),Vo(t))}};function No(e,t){return t?e?function(){return a(h(e)?e.call(this,this):e,h(t)?t.call(this,this):t)}:t:e}function Vo(e){if(d(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function Mo(e,t){return e?[...new Set([].concat(e,t))]:t}function Go(e,t){return e?a(Object.create(null),e,t):t}function jo(e,t){return e?d(e)&&d(t)?[...new Set([...e,...t])]:a(Object.create(null),Ao(e),Ao(null!=t?t:{})):t}function Uo(){return{app:null,config:{isNativeTag:r,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qo=0;function Bo(e,t){return function(t,o=null){h(t)||(t=a({},t)),null==o||b(o)||(o=null);const n=Uo(),r=new WeakSet,s=[];let i=!1;const c=n.app={_uid:qo++,_component:t,_props:o,_container:null,_context:n,_instance:null,version:dr,get config(){return n.config},set config(e){},use:(e,...t)=>(r.has(e)||(e&&h(e.install)?(r.add(e),e.install(c,...t)):h(e)&&(r.add(e),e(c,...t))),c),mixin:e=>(n.mixins.includes(e)||n.mixins.push(e),c),component:(e,t)=>t?(n.components[e]=t,c):n.components[e],directive:(e,t)=>t?(n.directives[e]=t,c):n.directives[e],mount(r,s,a){if(!i){const s=c._ceVNode||jn(t,o);return s.appContext=n,!0===a?a="svg":!1===a&&(a=void 0),e(s,r,a),i=!0,c._container=r,r.__vue_app__=c,lr(s.component)}},onUnmount(e){s.push(e)},unmount(){i&&(It(s,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide:(e,t)=>(n.provides[e]=t,c),runWithContext(e){const t=Jo;Jo=c;try{return e()}finally{Jo=t}}};return c}}let Jo=null;function Xo(e,o,...n){if(e.isUnmounted)return;const r=e.vnode.props||t;let s=n;const i=o.startsWith("update:"),a=i&&((e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${x(t)}Modifiers`]||e[`${k(t)}Modifiers`])(r,o.slice(7));let c;a&&(a.trim&&(s=n.map(e=>m(e)?e.trim():e)),a.number&&(s=n.map(O)));let l=r[c=A(o)]||r[c=A(x(o))];!l&&i&&(l=r[c=A(k(o))]),l&&It(l,e,6,s);const u=r[c+"Once"];if(u){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,It(u,e,6,s)}}const Wo=new WeakMap;function Ho(e,t,o=!1){const n=o?Wo:t.emitsCache,r=n.get(e);if(void 0!==r)return r;const s=e.emits;let i={},c=!1;if(!h(e)){const n=e=>{const o=Ho(e,t,!0);o&&(c=!0,a(i,o))};!o&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return s||c?(d(s)?s.forEach(e=>i[e]=null):a(i,s),b(e)&&n.set(e,i),i):(b(e)&&n.set(e,null),null)}function Ko(e,t){return!(!e||!s(t))&&(t=t.slice(2).replace(/Once$/,""),u(e,t[0].toLowerCase()+t.slice(1))||u(e,k(t))||u(e,t))}function Zo(e){const{type:t,vnode:o,proxy:n,withProxy:r,propsOptions:[s],slots:a,attrs:c,emit:l,render:u,renderCache:d,props:p,data:f,setupState:h,ctx:m,inheritAttrs:g}=e,b=Ut(e);let v,y;try{if(4&o.shapeFlag){const e=r||n,t=e;v=Jn(u.call(t,e,d,p,h,f,m)),y=c}else{const e=t;0,v=Jn(e.length>1?e(p,{attrs:c,slots:a,emit:l}):e(p,null)),y=t.props?c:Qo(c)}}catch(S){An.length=0,xt(S,e,1),v=jn(kn)}let C=v;if(y&&!1!==g){const e=Object.keys(y),{shapeFlag:t}=C;e.length&&7&t&&(s&&e.some(i)&&(y=Yo(y,s)),C=Un(C,y,!1,!0))}return o.dirs&&(C=Un(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(o.dirs):o.dirs),o.transition&&eo(C,o.transition),v=C,Ut(b),v}const Qo=e=>{let t;for(const o in e)("class"===o||"style"===o||s(o))&&((t||(t={}))[o]=e[o]);return t},Yo=(e,t)=>{const o={};for(const n in e)i(n)&&n.slice(9)in t||(o[n]=e[n]);return o};function en(e,t,o){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(t[s]!==e[s]&&!Ko(o,s))return!0}return!1}const tn={},on=()=>Object.create(tn),nn=e=>Object.getPrototypeOf(e)===tn;function rn(e,t,o,n=!1){const r={},s=on();e.propsDefaults=Object.create(null),sn(e,t,r,s);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);o?e.props=n?r:at(r,!1,Be,Qe,tt):e.type.props?e.props=r:e.props=s,e.attrs=s}function sn(e,o,n,r){const[s,i]=e.propsOptions;let a,c=!1;if(o)for(let t in o){if(_(t))continue;const l=o[t];let d;s&&u(s,d=x(t))?i&&i.includes(d)?(a||(a={}))[d]=l:n[d]=l:Ko(e.emitsOptions,t)||t in r&&l===r[t]||(r[t]=l,c=!0)}if(i){const o=pt(n),r=a||t;for(let t=0;t<i.length;t++){const a=i[t];n[a]=an(s,o,a,r[a],e,!u(r,a))}}return c}function an(e,t,o,n,r,s){const i=e[o];if(null!=i){const e=u(i,"default");if(e&&void 0===n){const e=i.default;if(i.type!==Function&&!i.skipFactory&&h(e)){const{propsDefaults:s}=r;if(o in s)n=s[o];else{const i=or(r);n=s[o]=e.call(null,t),i()}}else n=e;r.ce&&r.ce._setProp(o,n)}i[0]&&(s&&!e?n=!1:!i[1]||""!==n&&n!==k(o)||(n=!0))}return n}const cn=new WeakMap;function ln(e,n,r=!1){const s=r?cn:n.propsCache,i=s.get(e);if(i)return i;const c=e.props,l={},p=[];let f=!1;if(!h(e)){const t=e=>{f=!0;const[t,o]=ln(e,n,!0);a(l,t),o&&p.push(...o)};!r&&n.mixins.length&&n.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!c&&!f)return b(e)&&s.set(e,o),o;if(d(c))for(let o=0;o<c.length;o++){const e=x(c[o]);un(e)&&(l[e]=t)}else if(c)for(const t in c){const e=x(t);if(un(e)){const o=c[t],n=l[e]=d(o)||h(o)?{type:o}:a({},o),r=n.type;let s=!1,i=!0;if(d(r))for(let e=0;e<r.length;++e){const t=r[e],o=h(t)&&t.name;if("Boolean"===o){s=!0;break}"String"===o&&(i=!1)}else s=h(r)&&"Boolean"===r.name;n[0]=s,n[1]=i,(s||u(n,"default"))&&p.push(e)}}const m=[l,p];return b(e)&&s.set(e,m),m}function un(e){return"$"!==e[0]&&!_(e)}const dn=e=>"_"===e||"_ctx"===e||"$stable"===e,pn=e=>d(e)?e.map(Jn):[Jn(e)],fn=(e,t,o)=>{if(t._n)return t;const n=function(e,t=Gt){if(!t)return e;if(e._n)return e;const o=(...n)=>{o._d&&On(-1);const r=Ut(t);let s;try{s=e(...n)}finally{Ut(r),o._d&&On(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}((...e)=>pn(t(...e)),o);return n._c=!1,n},hn=(e,t,o)=>{const n=e._ctx;for(const r in e){if(dn(r))continue;const o=e[r];if(h(o))t[r]=fn(0,o,n);else if(null!=o){const e=pn(o);t[r]=()=>e}}},mn=(e,t)=>{const o=pn(t);e.slots.default=()=>o},gn=(e,t,o)=>{for(const n in t)!o&&dn(n)||(e[n]=t[n])},bn=function(e,t){t&&t.pendingBranch?d(e)?t.effects.push(...e):t.effects.push(e):(d(o=e)?Tt.push(...o):At&&-1===o.id?At.splice(Et+1,0,o):1&o.flags||(Tt.push(o),o.flags|=1),Ft());var o};function vn(e){return function(e){F().__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:c,createComment:l,setText:d,setElementText:p,parentNode:f,nextSibling:h,setScopeId:m=n,insertStaticContent:g}=e,b=(e,t,o,n=null,r=null,s=null,i=void 0,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Nn(e,t)&&(n=ee(e),X(e,r,s,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:d}=t;switch(l){case wn:y(e,t,o,n);break;case kn:C(e,t,o,n);break;case Tn:null==e&&S(t,o,n,i);break;case xn:R(e,t,o,n,r,s,i,a,c);break;default:1&d?I(e,t,o,n,r,s,i,a,c):6&d?N(e,t,o,n,r,s,i,a,c):(64&d||128&d)&&l.process(e,t,o,n,r,s,i,a,c,ne)}null!=u&&r?no(u,e&&e.ref,s,t||e,!t):null==u&&e&&null!=e.ref&&no(e.ref,null,s,e,!0)},y=(e,t,o,n)=>{if(null==e)r(t.el=c(t.children),o,n);else{const o=t.el=e.el;t.children!==e.children&&d(o,t.children)}},C=(e,t,o,n)=>{null==e?r(t.el=l(t.children||""),o,n):t.el=e.el},S=(e,t,o,n)=>{[e.el,e.anchor]=g(e.children,t,o,n,e.el,e.anchor)},D=({el:e,anchor:t},o,n)=>{let s;for(;e&&e!==t;)s=h(e),r(e,o,n),e=s;r(t,o,n)},P=({el:e,anchor:t})=>{let o;for(;e&&e!==t;)o=h(e),s(e),e=o;s(t)},I=(e,t,o,n,r,s,i,a,c)=>{if("svg"===t.type?i="svg":"math"===t.type&&(i="mathml"),null==e)w(t,o,n,r,s,i,a,c);else{const o=e.el&&e.el._isVueCE?e.el:null;try{o&&o._beginPatch(),E(e,t,r,s,i,a,c)}finally{o&&o._endPatch()}}},w=(e,t,o,n,s,c,l,u)=>{let d,f;const{props:h,shapeFlag:m,transition:g,dirs:b}=e;if(d=e.el=a(e.type,c,h&&h.is,h),8&m?p(d,e.children):16&m&&A(e.children,d,null,n,s,yn(e,c),l,u),b&&Bt(e,null,n,"created"),T(d,e,e.scopeId,l,n),h){for(const e in h)"value"===e||_(e)||i(d,e,null,h[e],c,n);"value"in h&&i(d,"value",null,h.value,c),(f=h.onVnodeBeforeMount)&&Hn(f,n,e)}b&&Bt(e,null,n,"beforeMount");const v=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(s,g);v&&g.beforeEnter(d),r(d,t,o),((f=h&&h.onVnodeMounted)||v||b)&&bn(()=>{f&&Hn(f,n,e),v&&g.enter(d),b&&Bt(e,null,n,"mounted")},s)},T=(e,t,o,n,r)=>{if(o&&m(e,o),n)for(let s=0;s<n.length;s++)m(e,n[s]);if(r){let o=r.subTree;if(t===o||In(o.type)&&(o.ssContent===t||o.ssFallback===t)){const t=r.vnode;T(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},A=(e,t,o,n,r,s,i,a,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=a?Xn(e[l]):Jn(e[l]);b(null,c,t,o,n,r,s,i,a)}},E=(e,o,n,r,s,a,c)=>{const l=o.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:f}=o;u|=16&e.patchFlag;const h=e.props||t,m=o.props||t;let g;if(n&&Cn(n,!1),(g=m.onVnodeBeforeUpdate)&&Hn(g,n,o,e),f&&Bt(o,e,n,"beforeUpdate"),n&&Cn(n,!0),(h.innerHTML&&null==m.innerHTML||h.textContent&&null==m.textContent)&&p(l,""),d?O(e.dynamicChildren,d,l,n,r,yn(o,s),a):c||U(e,o,l,null,n,r,yn(o,s),a,!1),u>0){if(16&u)z(l,h,m,n,s);else if(2&u&&h.class!==m.class&&i(l,"class",null,m.class,s),4&u&&i(l,"style",h.style,m.style,s),8&u){const e=o.dynamicProps;for(let t=0;t<e.length;t++){const o=e[t],r=h[o],a=m[o];a===r&&"value"!==o||i(l,o,r,a,s,n)}}1&u&&e.children!==o.children&&p(l,o.children)}else c||null!=d||z(l,h,m,n,s);((g=m.onVnodeUpdated)||f)&&bn(()=>{g&&Hn(g,n,o,e),f&&Bt(o,e,n,"updated")},r)},O=(e,t,o,n,r,s,i)=>{for(let a=0;a<t.length;a++){const c=e[a],l=t[a],u=c.el&&(c.type===xn||!Nn(c,l)||198&c.shapeFlag)?f(c.el):o;b(c,l,u,null,n,r,s,i,!0)}},z=(e,o,n,r,s)=>{if(o!==n){if(o!==t)for(const t in o)_(t)||t in n||i(e,t,o[t],null,s,r);for(const t in n){if(_(t))continue;const a=n[t],c=o[t];a!==c&&"value"!==t&&i(e,t,c,a,s,r)}"value"in n&&i(e,"value",o.value,n.value,s)}},R=(e,t,o,n,s,i,a,l,u)=>{const d=t.el=e?e.el:c(""),p=t.anchor=e?e.anchor:c("");let{patchFlag:f,dynamicChildren:h,slotScopeIds:m}=t;m&&(l=l?l.concat(m):m),null==e?(r(d,o,n),r(p,o,n),A(t.children||[],o,p,s,i,a,l,u)):f>0&&64&f&&h&&e.dynamicChildren&&e.dynamicChildren.length===h.length?(O(e.dynamicChildren,h,o,s,i,a,l),(null!=t.key||s&&t===s.subTree)&&Sn(e,t,!0)):U(e,t,o,p,s,i,a,l,u)},N=(e,t,o,n,r,s,i,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,o,n,i,c):V(t,o,n,r,s,i,c):M(e,t,c)},V=(e,o,n,r,s,i,a)=>{const c=e.component=function(e,o,n){const r=e.type,s=(o?o.appContext:e.appContext)||Kn,i={uid:Zn++,vnode:e,type:r,parent:o,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Z(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(s.provides),ids:o?o.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ln(r,s),emitsOptions:Ho(r,s),emit:null,emitted:null,propsDefaults:t,inheritAttrs:r.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};i.ctx={_:i},i.root=o?o.root:i,i.emit=Xo.bind(null,i),e.ce&&e.ce(i);return i}(e,r,s);if(io(e)&&(c.ctx.renderer=ne),function(e,t=!1,o=!1){t&&tr(t);const{props:n,children:r}=e.vnode,s=rr(e);rn(e,n,s,t),((e,t,o)=>{const n=e.slots=on();if(32&e.vnode.shapeFlag){const e=t._;e?(gn(n,t,o),o&&L(n,"_",e,!0)):hn(t,n)}else t&&mn(e,t)})(e,r,o||t);const i=s?function(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,To);const{setup:n}=o;if(n){he();const o=e.setupContext=n.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,cr),slots:e.slots,emit:e.emit,expose:t}}(e):null,r=or(e),s=Pt(n,e,0,[e.props,o]),i=v(s);if(me(),r(),!i&&!e.sp||so(e)||to(e),i){if(s.then(nr,nr),t)return s.then(t=>{ir(e,t)}).catch(t=>{xt(t,e,0)});e.asyncDep=s}else ir(e,s)}else ar(e)}(e,t):void 0;t&&tr(!1)}(c,!1,a),c.asyncDep){if(s&&s.registerDep(c,G,a),!e.el){const t=c.subTree=jn(kn);C(null,t,o,n),e.placeholder=t.el}}else G(c,e,o,n,s,i,a)},M=(e,t,o)=>{const n=t.component=e.component;if(function(e,t,o){const{props:n,children:r,component:s}=e,{props:i,children:a,patchFlag:c}=t,l=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(o&&c>=0))return!(!r&&!a||a&&a.$stable)||n!==i&&(n?!i||en(n,i,l):!!i);if(1024&c)return!0;if(16&c)return n?en(n,i,l):!!i;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const o=e[t];if(i[o]!==n[o]&&!Ko(l,o))return!0}}return!1}(e,t,o)){if(n.asyncDep&&!n.asyncResolved)return void j(n,t,o);n.next=t,n.update()}else t.el=e.el,n.vnode=t},G=(e,t,o,n,r,s,i)=>{const a=()=>{if(e.isMounted){let{next:t,bu:o,u:n,parent:c,vnode:l}=e;{const o=Dn(e);if(o)return t&&(t.el=l.el,j(e,t,i)),void o.asyncDep.then(()=>{e.isUnmounted||a()})}let u,d=t;Cn(e,!1),t?(t.el=l.el,j(e,t,i)):t=l,o&&$(o),(u=t.props&&t.props.onVnodeBeforeUpdate)&&Hn(u,c,t,l),Cn(e,!0);const p=Zo(e),h=e.subTree;e.subTree=p,b(h,p,f(h.el),ee(h),e,r,s),t.el=p.el,null===d&&function({vnode:e,parent:t},o){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n!==e)break;(e=t.vnode).el=o,t=t.parent}}(e,p.el),n&&bn(n,r),(u=t.props&&t.props.onVnodeUpdated)&&bn(()=>Hn(u,c,t,l),r)}else{let i;const{el:a,props:c}=t,{bm:l,m:u,parent:d,root:p,type:f}=e,h=so(t);Cn(e,!1),l&&$(l),!h&&(i=c&&c.onVnodeBeforeMount)&&Hn(i,d,t),Cn(e,!0);{p.ce&&!1!==p.ce._def.shadowRoot&&p.ce._injectChildStyle(f);const i=e.subTree=Zo(e);b(null,i,o,n,e,r,s),t.el=i.el}if(u&&bn(u,r),!h&&(i=c&&c.onVnodeMounted)){const e=t;bn(()=>Hn(i,d,e),r)}(256&t.shapeFlag||d&&so(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&bn(e.a,r),e.isMounted=!0,t=o=n=null}};e.scope.on();const c=e.effect=new Y(a);e.scope.off();const l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>zt(u),Cn(e,!0),l()},j=(e,o,n)=>{o.component=e;const r=e.vnode.props;e.vnode=o,e.next=null,function(e,t,o,n){const{props:r,attrs:s,vnode:{patchFlag:i}}=e,a=pt(r),[c]=e.propsOptions;let l=!1;if(!(n||i>0)||16&i){let n;sn(e,t,r,s)&&(l=!0);for(const s in a)t&&(u(t,s)||(n=k(s))!==s&&u(t,n))||(c?!o||void 0===o[s]&&void 0===o[n]||(r[s]=an(c,a,s,void 0,e,!0)):delete r[s]);if(s!==a)for(const e in s)t&&u(t,e)||(delete s[e],l=!0)}else if(8&i){const o=e.vnode.dynamicProps;for(let n=0;n<o.length;n++){let i=o[n];if(Ko(e.emitsOptions,i))continue;const d=t[i];if(c)if(u(s,i))d!==s[i]&&(s[i]=d,l=!0);else{const t=x(i);r[t]=an(c,a,t,d,e,!1)}else d!==s[i]&&(s[i]=d,l=!0)}}l&&xe(e.attrs,"set","")}(e,o.props,r,n),((e,o,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=t;if(32&r.shapeFlag){const e=o._;e?n&&1===e?i=!1:gn(s,o,n):(i=!o.$stable,hn(o,s)),a=o}else o&&(mn(e,o),a={default:1});if(i)for(const t in s)dn(t)||null!=a[t]||delete s[t]})(e,o.children,n),he(),Rt(e),me()},U=(e,t,o,n,r,s,i,a,c=!1)=>{const l=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void B(l,d,o,n,r,s,i,a,c);if(256&f)return void q(l,d,o,n,r,s,i,a,c)}8&h?(16&u&&Q(l,r,s),d!==l&&p(o,d)):16&u?16&h?B(l,d,o,n,r,s,i,a,c):Q(l,r,s,!0):(8&u&&p(o,""),16&h&&A(d,o,n,r,s,i,a,c))},q=(e,t,n,r,s,i,a,c,l)=>{t=t||o;const u=(e=e||o).length,d=t.length,p=Math.min(u,d);let f;for(f=0;f<p;f++){const o=t[f]=l?Xn(t[f]):Jn(t[f]);b(e[f],o,n,null,s,i,a,c,l)}u>d?Q(e,s,i,!0,!1,p):A(t,n,r,s,i,a,c,l,p)},B=(e,t,n,r,s,i,a,c,l)=>{let u=0;const d=t.length;let p=e.length-1,f=d-1;for(;u<=p&&u<=f;){const o=e[u],r=t[u]=l?Xn(t[u]):Jn(t[u]);if(!Nn(o,r))break;b(o,r,n,null,s,i,a,c,l),u++}for(;u<=p&&u<=f;){const o=e[p],r=t[f]=l?Xn(t[f]):Jn(t[f]);if(!Nn(o,r))break;b(o,r,n,null,s,i,a,c,l),p--,f--}if(u>p){if(u<=f){const e=f+1,o=e<d?t[e].el:r;for(;u<=f;)b(null,t[u]=l?Xn(t[u]):Jn(t[u]),n,o,s,i,a,c,l),u++}}else if(u>f)for(;u<=p;)X(e[u],s,i,!0),u++;else{const h=u,m=u,g=new Map;for(u=m;u<=f;u++){const e=t[u]=l?Xn(t[u]):Jn(t[u]);null!=e.key&&g.set(e.key,u)}let v,y=0;const C=f-m+1;let S=!1,D=0;const _=new Array(C);for(u=0;u<C;u++)_[u]=0;for(u=h;u<=p;u++){const o=e[u];if(y>=C){X(o,s,i,!0);continue}let r;if(null!=o.key)r=g.get(o.key);else for(v=m;v<=f;v++)if(0===_[v-m]&&Nn(o,t[v])){r=v;break}void 0===r?X(o,s,i,!0):(_[r-m]=u+1,r>=D?D=r:S=!0,b(o,t[r],n,null,s,i,a,c,l),y++)}const P=S?function(e){const t=e.slice(),o=[0];let n,r,s,i,a;const c=e.length;for(n=0;n<c;n++){const c=e[n];if(0!==c){if(r=o[o.length-1],e[r]<c){t[n]=r,o.push(n);continue}for(s=0,i=o.length-1;s<i;)a=s+i>>1,e[o[a]]<c?s=a+1:i=a;c<e[o[s]]&&(s>0&&(t[n]=o[s-1]),o[s]=n)}}s=o.length,i=o[s-1];for(;s-- >0;)o[s]=i,i=t[i];return o}(_):o;for(v=P.length-1,u=C-1;u>=0;u--){const e=m+u,o=t[e],p=t[e+1],f=e+1<d?p.el||Pn(p):r;0===_[u]?b(null,o,n,f,s,i,a,c,l):S&&(v<0||u!==P[v]?J(o,n,f,2):v--)}}},J=(e,t,o,n,i=null)=>{const{el:a,type:c,transition:l,children:u,shapeFlag:d}=e;if(6&d)return void J(e.component.subTree,t,o,n);if(128&d)return void e.suspense.move(t,o,n);if(64&d)return void c.move(e,t,o,ne);if(c===xn){r(a,t,o);for(let e=0;e<u.length;e++)J(u[e],t,o,n);return void r(e.anchor,t,o)}if(c===Tn)return void D(e,t,o);if(2!==n&&1&d&&l)if(0===n)l.beforeEnter(a),r(a,t,o),bn(()=>l.enter(a),i);else{const{leave:n,delayLeave:i,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?s(a):r(a,t,o)},d=()=>{a._isLeaving&&a[Yt](!0),n(a,()=>{u(),c&&c()})};i?i(a,u,d):d()}else r(a,t,o)},X=(e,t,o,n=!1,r=!1)=>{const{type:s,props:i,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:p,cacheIndex:f}=e;if(-2===d&&(r=!1),null!=a&&(he(),no(a,null,o,e,!0),me()),null!=f&&(t.renderCache[f]=void 0),256&u)return void t.ctx.deactivate(e);const h=1&u&&p,m=!so(e);let g;if(m&&(g=i&&i.onVnodeBeforeUnmount)&&Hn(g,t,e),6&u)K(e.component,o,n);else{if(128&u)return void e.suspense.unmount(o,n);h&&Bt(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,o,ne,n):l&&!l.hasOnce&&(s!==xn||d>0&&64&d)?Q(l,t,o,!1,!0):(s===xn&&384&d||!r&&16&u)&&Q(c,t,o),n&&W(e)}(m&&(g=i&&i.onVnodeUnmounted)||h)&&bn(()=>{g&&Hn(g,t,e),h&&Bt(e,null,t,"unmounted")},o)},W=e=>{const{type:t,el:o,anchor:n,transition:r}=e;if(t===xn)return void H(o,n);if(t===Tn)return void P(e);const i=()=>{s(o),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:n}=r,s=()=>t(o,i);n?n(e.el,i,s):s()}else i()},H=(e,t)=>{let o;for(;e!==t;)o=h(e),s(e),e=o;s(t)},K=(e,t,o)=>{const{bum:n,scope:r,job:s,subTree:i,um:a,m:c,a:l}=e;_n(c),_n(l),n&&$(n),r.stop(),s&&(s.flags|=8,X(i,e,t,o)),a&&bn(a,t),bn(()=>{e.isUnmounted=!0},t)},Q=(e,t,o,n=!1,r=!1,s=0)=>{for(let i=s;i<e.length;i++)X(e[i],t,o,n,r)},ee=e=>{if(6&e.shapeFlag)return ee(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=h(e.anchor||e.el),o=t&&t[Qt];return o?h(o):t};let te=!1;const oe=(e,t,o)=>{let n;null==e?t._vnode&&(X(t._vnode,null,null,!0),n=t._vnode.component):b(t._vnode||null,e,t,null,null,null,o),t._vnode=e,te||(te=!0,Rt(n),Nt(),te=!1)},ne={p:b,um:X,m:J,r:W,mt:V,mc:A,pc:U,pbc:O,n:ee,o:e};let re;return{render:oe,hydrate:re,createApp:Bo(oe)}}(e)}function yn({type:e,props:t},o){return"svg"===o&&"foreignObject"===e||"mathml"===o&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function Cn({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Sn(e,t,o=!1){const n=e.children,r=t.children;if(d(n)&&d(r))for(let s=0;s<n.length;s++){const t=n[s];let i=r[s];1&i.shapeFlag&&!i.dynamicChildren&&((i.patchFlag<=0||32===i.patchFlag)&&(i=r[s]=Xn(r[s]),i.el=t.el),o||-2===i.patchFlag||Sn(t,i)),i.type===wn&&(-1!==i.patchFlag?i.el=t.el:i.__elIndex=s+(e.type===xn?1:0)),i.type!==kn||i.el||(i.el=t.el)}}function Dn(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Dn(t)}function _n(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Pn(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Pn(t.subTree):null}const In=e=>e.__isSuspense;const xn=Symbol.for("v-fgt"),wn=Symbol.for("v-txt"),kn=Symbol.for("v-cmt"),Tn=Symbol.for("v-stc"),An=[];let En=null;function $n(e=!1){An.push(En=e?null:[])}let Ln=1;function On(e,t=!1){Ln+=e,e<0&&En&&t&&(En.hasOnce=!0)}function zn(e){return e.dynamicChildren=Ln>0?En||o:null,An.pop(),En=An[An.length-1]||null,Ln>0&&En&&En.push(e),e}function Fn(e,t,o,n,r,s){return zn(Gn(e,t,o,n,r,s,!0))}function Rn(e){return!!e&&!0===e.__v_isVNode}function Nn(e,t){return e.type===t.type&&e.key===t.key}const Vn=({key:e})=>null!=e?e:null,Mn=({ref:e,ref_key:t,ref_for:o})=>("number"==typeof e&&(e=""+e),null!=e?m(e)||mt(e)||h(e)?{i:Gt,r:e,k:t,f:!!o}:e:null);function Gn(e,t=null,o=null,n=0,r=null,s=(e===xn?0:1),i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Vn(t),ref:t&&Mn(t),scopeId:jt,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Gt};return a?(Wn(c,o),128&s&&e.normalize(c)):o&&(c.shapeFlag|=m(o)?8:16),Ln>0&&!i&&En&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&En.push(c),c}const jn=function(e,t=null,o=null,n=0,r=null,s=!1){e&&e!==Po||(e=kn);if(Rn(e)){const n=Un(e,t,!0);return o&&Wn(n,o),Ln>0&&!s&&En&&(6&n.shapeFlag?En[En.indexOf(e)]=n:En.push(n)),n.patchFlag=-2,n}i=e,h(i)&&"__vccOpts"in i&&(e=e.__vccOpts);var i;if(t){t=function(e){return e?dt(e)||nn(e)?a({},e):e:null}(t);let{class:e,style:o}=t;e&&!m(e)&&(t.class=j(e)),b(o)&&(dt(o)&&!d(o)&&(o=a({},o)),t.style=R(o))}const c=m(e)?1:In(e)?128:(e=>e.__isTeleport)(e)?64:b(e)?4:h(e)?2:0;return Gn(e,t,o,n,r,c,s,!0)};function Un(e,t,o=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:c,transition:l}=e,u=t?function(...e){const t={};for(let o=0;o<e.length;o++){const n=e[o];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=j([t.class,n.class]));else if("style"===e)t.style=R([t.style,n.style]);else if(s(e)){const o=t[e],r=n[e];!r||o===r||d(o)&&o.includes(r)||(t[e]=o?[].concat(o,r):r)}else""!==e&&(t[e]=n[e])}return t}(r||{},t):r,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Vn(u),ref:t&&t.ref?o&&i?d(i)?i.concat(Mn(t)):[i,Mn(t)]:Mn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xn?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Un(e.ssContent),ssFallback:e.ssFallback&&Un(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&eo(p,l.clone(p)),p}function qn(e=" ",t=0){return jn(wn,null,e,t)}function Bn(e="",t=!1){return t?($n(),zn(jn(kn,null,e,o,n,!0))):jn(kn,null,e);var o,n}function Jn(e){return null==e||"boolean"==typeof e?jn(kn):d(e)?jn(xn,null,e.slice()):Rn(e)?Xn(e):jn(wn,null,String(e))}function Xn(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Un(e)}function Wn(e,t){let o=0;const{shapeFlag:n}=e;if(null==t)t=null;else if(d(t))o=16;else if("object"==typeof t){if(65&n){const o=t.default;return void(o&&(o._c&&(o._d=!1),Wn(e,o()),o._c&&(o._d=!0)))}{o=32;const n=t._;n||nn(t)?3===n&&Gt&&(1===Gt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Gt}}else h(t)?(t={default:t,_ctx:Gt},o=32):(t=String(t),64&n?(o=16,t=[qn(t)]):o=8);e.children=t,e.shapeFlag|=o}function Hn(e,t,o,n=null){It(e,t,7,[o,n])}const Kn=Uo();let Zn=0;let Qn=null;const Yn=()=>Qn||Gt;let er,tr;{const e=F(),t=(t,o)=>{let n;return(n=e[t])||(n=e[t]=[]),n.push(o),e=>{n.length>1?n.forEach(t=>t(e)):n[0](e)}};er=t("__VUE_INSTANCE_SETTERS__",e=>Qn=e),tr=t("__VUE_SSR_SETTERS__",e=>sr=e)}const or=e=>{const t=Qn;return er(e),e.scope.on(),()=>{e.scope.off(),er(t)}},nr=()=>{Qn&&Qn.scope.off(),er(null)};function rr(e){return 4&e.vnode.shapeFlag}let sr=!1;function ir(e,t,o){h(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:b(t)&&(e.setupState=bt(t)),ar(e)}function ar(e,t,o){const r=e.type;e.render||(e.render=r.render||n);{const t=or(e);he();try{$o(e)}finally{me(),t()}}}const cr={get:(e,t)=>(Ie(e,0,""),e[t])};function lr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bt((t=e.exposed,!u(t,"__v_skip")&&Object.isExtensible(t)&&L(t,"__v_skip",!0),t)),{get:(t,o)=>o in t?t[o]:o in wo?wo[o](e):void 0,has:(e,t)=>t in e||t in wo})):e.proxy;var t}const ur=(e,t)=>{const o=function(e,t,o=!1){let n,r;return h(e)?n=e:(n=e.get,r=e.set),new vt(n,r,o)}(e,0,sr);return o},dr="3.5.26";
/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let pr;const fr="undefined"!=typeof window&&window.trustedTypes;if(fr)try{pr=fr.createPolicy("vue",{createHTML:e=>e})}catch(Ts){}const hr=pr?e=>pr.createHTML(e):e=>e,mr="undefined"!=typeof document?document:null,gr=mr&&mr.createElement("template"),br={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,n)=>{const r="svg"===t?mr.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?mr.createElementNS("http://www.w3.org/1998/Math/MathML",e):o?mr.createElement(e,{is:o}):mr.createElement(e);return"select"===e&&n&&null!=n.multiple&&r.setAttribute("multiple",n.multiple),r},createText:e=>mr.createTextNode(e),createComment:e=>mr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,n,r,s){const i=o?o.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),o),r!==s&&(r=r.nextSibling););else{gr.innerHTML=hr("svg"===n?`<svg>${e}</svg>`:"mathml"===n?`<math>${e}</math>`:e);const r=gr.content;if("svg"===n||"mathml"===n){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,o)}return[i?i.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},vr=Symbol("_vtc");const yr=Symbol("_vod"),Cr=Symbol("_vsh"),Sr=Symbol(""),Dr=/(?:^|;)\s*display\s*:/;const _r=/\s*!important$/;function Pr(e,t,o){if(d(o))o.forEach(o=>Pr(e,t,o));else if(null==o&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const n=function(e,t){const o=xr[t];if(o)return o;let n=x(t);if("filter"!==n&&n in e)return xr[t]=n;n=T(n);for(let r=0;r<Ir.length;r++){const o=Ir[r]+n;if(o in e)return xr[t]=o}return t}(e,t);_r.test(o)?e.setProperty(k(n),o.replace(_r,""),"important"):e[n]=o}}const Ir=["Webkit","Moz","ms"],xr={};const wr="http://www.w3.org/1999/xlink";function kr(e,t,o,n,r,s=U(t)){n&&t.startsWith("xlink:")?null==o?e.removeAttributeNS(wr,t.slice(6,t.length)):e.setAttributeNS(wr,t,o):null==o||s&&!q(o)?e.removeAttribute(t):e.setAttribute(t,s?"":g(o)?String(o):o)}function Tr(e,t,o,n,r){if("innerHTML"===t||"textContent"===t)return void(null!=o&&(e[t]="innerHTML"===t?hr(o):o));const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){const n="OPTION"===s?e.getAttribute("value")||"":e.value,r=null==o?"checkbox"===e.type?"on":"":String(o);return n===r&&"_value"in e||(e.value=r),null==o&&e.removeAttribute(t),void(e._value=o)}let i=!1;if(""===o||null==o){const n=typeof e[t];"boolean"===n?o=q(o):null==o&&"string"===n?(o="",i=!0):"number"===n&&(o=0,i=!0)}try{e[t]=o}catch(Ts){}i&&e.removeAttribute(r||t)}function Ar(e,t,o,n){e.addEventListener(t,o,n)}const Er=Symbol("_vei");function $r(e,t,o,n,r=null){const s=e[Er]||(e[Er]={}),i=s[t];if(n&&i)i.value=n;else{const[o,a]=function(e){let t;if(Lr.test(e)){let o;for(t={};o=e.match(Lr);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}const o=":"===e[2]?e.slice(3):k(e.slice(2));return[o,t]}(t);if(n){const i=s[t]=function(e,t){const o=e=>{if(e._vts){if(e._vts<=o.attached)return}else e._vts=Date.now();It(function(e,t){if(d(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,o.value),t,5,[e])};return o.value=e,o.attached=Fr(),o}(n,r);Ar(e,o,i,a)}else i&&(!function(e,t,o,n){e.removeEventListener(t,o,n)}(e,o,i,a),s[t]=void 0)}}const Lr=/(?:Once|Passive|Capture)$/;let Or=0;const zr=Promise.resolve(),Fr=()=>Or||(zr.then(()=>Or=0),Or=Date.now());const Rr=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Nr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return d(t)?e=>$(t,e):t};function Vr(e){e.target.composing=!0}function Mr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Gr=Symbol("_assign");function jr(e,t,o){return t&&(e=e.trim()),o&&(e=O(e)),e}const Ur={created(e,{modifiers:{lazy:t,trim:o,number:n}},r){e[Gr]=Nr(r);const s=n||r.props&&"number"===r.props.type;Ar(e,t?"change":"input",t=>{t.target.composing||e[Gr](jr(e.value,o,s))}),(o||s)&&Ar(e,"change",()=>{e.value=jr(e.value,o,s)}),t||(Ar(e,"compositionstart",Vr),Ar(e,"compositionend",Mr),Ar(e,"change",Mr))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Gr]=Nr(i),e.composing)return;const a=null==t?"":t;if((!s&&"number"!==e.type||/^0\d/.test(e.value)?e.value:O(e.value))!==a){if(document.activeElement===e&&"range"!==e.type){if(n&&t===o)return;if(r&&e.value.trim()===a)return}e.value=a}}},qr=a({patchProp:(e,t,o,n,r,a)=>{const c="svg"===r;"class"===t?function(e,t,o){const n=e[vr];n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}(e,n,c):"style"===t?function(e,t,o){const n=e.style,r=m(o);let s=!1;if(o&&!r){if(t)if(m(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==o[t]&&Pr(n,t,"")}else for(const e in t)null==o[e]&&Pr(n,e,"");for(const e in o)"display"===e&&(s=!0),Pr(n,e,o[e])}else if(r){if(t!==o){const e=n[Sr];e&&(o+=";"+e),n.cssText=o,s=Dr.test(o)}}else t&&e.removeAttribute("style");yr in e&&(e[yr]=s?n.display:"",e[Cr]&&(n.display="none"))}(e,o,n):s(t)?i(t)||$r(e,t,0,n,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,o,n){if(n)return"innerHTML"===t||"textContent"===t||!!(t in e&&Rr(t)&&h(o));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("sandbox"===t&&"IFRAME"===e.tagName)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(Rr(t)&&m(o))return!1;return t in e}(e,t,n,c))?(Tr(e,t,n),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||kr(e,t,n,c,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&m(n)?("true-value"===t?e._trueValue=n:"false-value"===t&&(e._falseValue=n),kr(e,t,n,c)):Tr(e,x(t),n,0,t)}},br);let Br;const Jr=new class{constructor(){this.maxSize=10485760,this.currentSize=0,this.prefix="xubio_cache_",this.ttlMap={clientes:864e5,productos:432e5,listaPrecios:216e5,maestros:6048e5},this.calcularTamaoActual()}"calcularTamaoActual"(){this.currentSize=0;Object.keys(localStorage).forEach(e=>{if(e.startsWith(this.prefix))try{const t=localStorage.getItem(e);t&&(this.currentSize+=new Blob([t]).size)}catch(Ts){}})}"calcularTamaoObjeto"(e){return new Blob([JSON.stringify(e)]).size}getCachedData(e){try{const t=localStorage.getItem(`${this.prefix}${e}`);if(!t)return null;const{data:o,timestamp:n,ttl:r}=JSON.parse(t),s=Date.now();if(s-n>r)return localStorage.removeItem(`${this.prefix}${e}`),this.calcularTamaoActual(),console.log(` Cache expirado para: ${e}`),null;const i=Math.floor((s-n)/1e3/60);return console.log(` Cache vlido para: ${e} (edad: ${i} minutos)`),o}catch(t){return console.error(` Error leyendo cache ${e}:`,t),localStorage.removeItem(`${this.prefix}${e}`),this.calcularTamaoActual(),null}}setCachedData(e,t,o=null){try{const n=o||this.getTTL(e)||36e5,r={data:t,timestamp:Date.now(),ttl:n},s=this.calcularTamaoObjeto(r);this.currentSize+s>this.maxSize&&(console.warn(` Cache casi lleno (${Math.round(this.currentSize/1024/1024*100)/100}MB), limpiando caches viejos...`),this.limpiarCachesExpirados(),this.currentSize+s>this.maxSize&&this.evictOldest()),localStorage.setItem(`${this.prefix}${e}`,JSON.stringify(r)),this.currentSize+=s,console.log(` Cache guardado para: ${e} (TTL: ${Math.floor(n/1e3/60)} minutos, tamao: ${Math.round(s/1024)}KB)`)}catch(n){console.error(` Error guardando cache ${e}:`,n),n instanceof Error&&"QuotaExceededError"===n.name&&(this.limpiarCachesExpirados(),this.evictOldest())}}evictOldest(){const e=Object.keys(localStorage),t=[];e.forEach(e=>{if(e.startsWith(this.prefix))try{const o=localStorage.getItem(e);if(o){const{timestamp:n}=JSON.parse(o);t.push({key:e,timestamp:n})}}catch(Ts){}}),t.sort((e,t)=>e.timestamp-t.timestamp);let o=0;for(const n of t){if(this.currentSize<.8*this.maxSize)break;localStorage.removeItem(n.key),o++}this.calcularTamaoActual(),o>0&&console.log(` Evicted ${o} caches antiguos para liberar espacio`)}invalidarCache(e){const t=`${this.prefix}${e}`;localStorage.getItem(t)&&(localStorage.removeItem(t),this.calcularTamaoActual(),console.log(` Cache invalidado: ${e}`))}limpiarCachesExpirados(){const e=Object.keys(localStorage);let t=0;e.forEach(e=>{if(e.startsWith(this.prefix))try{const o=localStorage.getItem(e);if(o){const{timestamp:n,ttl:r}=JSON.parse(o);Date.now()-n>r&&(localStorage.removeItem(e),t++)}}catch(o){localStorage.removeItem(e),t++}}),this.calcularTamaoActual(),t>0&&console.log(` Limpiados ${t} caches expirados`)}getTTL(e){return this.ttlMap[e]||36e5}limpiarTodosLosCaches(){const e=Object.keys(localStorage);let t=0;return e.forEach(e=>{e.startsWith(this.prefix)&&(localStorage.removeItem(e),t++)}),this.currentSize=0,console.log(` Limpiados ${t} caches manualmente`),t}getStats(){return{currentSize:this.currentSize,maxSize:this.maxSize,usagePercent:Math.round(this.currentSize/this.maxSize*100),entries:Object.keys(localStorage).filter(e=>e.startsWith(this.prefix)).length}}};function Xr(e){return e&&0!==e?parseFloat(String(e)).toFixed(2):"0.00"}function Wr(e){if(!e)return"";const t=e.toString().replace(/\D/g,"");return 11===t.length?`${t.substring(0,2)}-${t.substring(2,10)}-${t.substring(10,11)}`:t.length>0&&t.length<11?t:(e.match(/^\d{2}-\d{8}-\d{1}$/),e)}const Hr=new Map;function Kr(e,t,o){return{requestXubio:async function(n,r="GET",s=null,i=null){const a="GET"===r?`${r}:${n}:${i?JSON.stringify(i):""}`:null;if(a&&Hr.has(a)){const e=Hr.get(a);if(e)return console.log(" Reutilizando request pendiente:",a),e}const c=(async()=>{try{t()||await e(!0);let a=`/api/proxy${n}`;if(i){const e=new URLSearchParams;for(const[t,o]of Object.entries(i))null!=o&&e.append(t,String(o));a+="?"+e.toString()}const l={Authorization:`Bearer ${o()}`,Accept:"application/json"};"GET"!==r&&s&&(l["Content-Type"]="application/json");const u={method:r,headers:l,body:"GET"!==r&&s?JSON.stringify(s):void 0};console.log(" Request Xubio:",{url:a,method:r,payload:s?JSON.stringify(s).substring(0,200):null});const d=await fetch(a,u);let p;console.log(" Response recibida:",d.status,d.statusText);try{const e=await d.text();console.log(" Response body (primeros 500 chars):",e.substring(0,500)),p=e?JSON.parse(e):null}catch(c){console.error(" Error parseando JSON:",c);const e=c instanceof Error?c.message:String(c);throw new Error(`Error parseando respuesta JSON: ${e}`)}if(401===d.status){console.log(" Token expirado, renovando..."),await e(!0);const t=o();l.Authorization=`Bearer ${t}`,u.headers=l;const n=await fetch(a,u),r=await n.text();return{response:n,data:r?JSON.parse(r):null}}return{response:d,data:p}}catch(l){throw console.error(" Error en fetch:",l),l}finally{a&&Hr.delete(a)}})();return a&&Hr.set(a,c),c}}}function Zr(e,t=300){let o=null;return function(...n){null!==o&&clearTimeout(o),o=setTimeout(()=>{o=null,e(...n)},t)}}const Qr=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o},Yr={class:"producto-selector"},es={class:"form-group"},ts={style:{position:"relative"}},os={key:0,class:"dropdown-productos"},ns=["onClick"],rs={style:{"font-size":"12px",color:"#666"}},ss={style:{"font-weight":"bold",color:"#2196F3"}},is={key:0},as={key:1,style:{color:"#999","font-size":"11px"}},cs={key:1,class:"dropdown-empty"},ls={key:0,class:"productos-seleccionados"},us={class:"facturas-table"},ds=["onUpdate:modelValue"],ps=["onUpdate:modelValue"],fs=["onClick"];const hs=Qr({name:"ProductoSelector",props:{productos:{type:Array,default:()=>[]},productosSeleccionados:{type:Array,default:()=>[]}},emits:["select-producto","remove-producto"],data:()=>({busquedaProducto:"",busquedaDebounced:"",mostrarDropdown:!1}),created(){this.debouncedBusqueda=Zr(e=>{this.busquedaDebounced=e},300)},watch:{busquedaProducto(e){this.debouncedBusqueda(e)}},computed:{productosFiltrados(){if(!this.busquedaDebounced.trim())return this.productos;const e=this.busquedaDebounced.toLowerCase();return this.productos.filter(t=>{const o=(t.nombre||"").toLowerCase(),n=(t.codigo||"").toLowerCase(),r=(t.descripcion||"").toLowerCase();return o.includes(e)||n.includes(e)||r.includes(e)})}},methods:{formatearPrecio:Xr,seleccionarProducto(e){this.$emit("select-producto",e),this.busquedaProducto="",this.mostrarDropdown=!1},ocultarDropdown(){setTimeout(()=>{this.mostrarDropdown=!1},200)}}},[["render",function(e,t,o,n,r,s){return $n(),Fn("div",Yr,[Gn("div",es,[t[5]||(t[5]=Gn("label",{for:"selectorProducto"}," Agregar Producto:",-1)),Gn("div",ts,[qt(Gn("input",{type:"text",id:"selectorProducto","onUpdate:modelValue":t[0]||(t[0]=e=>r.busquedaProducto=e),onInput:t[1]||(t[1]=e=>r.mostrarDropdown=!0),onFocus:t[2]||(t[2]=e=>r.mostrarDropdown=!0),onBlur:t[3]||(t[3]=(...e)=>s.ocultarDropdown&&s.ocultarDropdown(...e)),placeholder:"Buscar producto por nombre, cdigo o descripcin...",style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},null,544),[[Ur,r.busquedaProducto]]),r.mostrarDropdown&&s.productosFiltrados.length>0?($n(),Fn("div",os,[($n(!0),Fn(xn,null,Io(s.productosFiltrados,e=>($n(),Fn("div",{key:e.id||e.ID,onClick:t=>s.seleccionarProducto(e),class:"dropdown-item"},[Gn("div",null,[Gn("strong",null,J(e.nombre||e.codigo||"Sin nombre"),1),Gn("div",rs," Cdigo: "+J(e.codigo||"N/A"),1)]),Gn("div",ss,[e.precioAGDP||e.precio?($n(),Fn("span",is," $"+J(s.formatearPrecio(e.precioAGDP||e.precio)),1)):($n(),Fn("span",as," Sin precio "))])],8,ns))),128))])):Bn("",!0),r.mostrarDropdown&&0===s.productosFiltrados.length&&r.busquedaProducto.trim()?($n(),Fn("div",cs,[...t[4]||(t[4]=[Gn("div",{style:{color:"#666","text-align":"center"}},"No se encontraron productos",-1)])])):Bn("",!0)])]),o.productosSeleccionados.length>0?($n(),Fn("div",ls,[t[7]||(t[7]=Gn("h3",null,"Productos Seleccionados:",-1)),Gn("table",us,[t[6]||(t[6]=Gn("thead",null,[Gn("tr",null,[Gn("th",null,"Producto"),Gn("th",null,"Cantidad"),Gn("th",null,"Precio Unit."),Gn("th",null,"Subtotal"),Gn("th",null,"Accin")])],-1)),Gn("tbody",null,[($n(!0),Fn(xn,null,Io(o.productosSeleccionados,(t,o)=>($n(),Fn("tr",{key:o},[Gn("td",null,J(t.producto.nombre||t.producto.codigo||"Sin nombre"),1),Gn("td",null,[qt(Gn("input",{type:"number","onUpdate:modelValue":e=>t.cantidad=e,min:"0.01",step:"0.01",style:{width:"80px"}},null,8,ds),[[Ur,t.cantidad,void 0,{number:!0}]])]),Gn("td",null,[qt(Gn("input",{type:"number","onUpdate:modelValue":e=>t.precio=e,min:"0",step:"0.01",style:{width:"100px"}},null,8,ps),[[Ur,t.precio,void 0,{number:!0}]])]),Gn("td",null,"$"+J((t.cantidad*t.precio).toFixed(2)),1),Gn("td",null,[Gn("button",{class:"test-btn",onClick:t=>e.$emit("remove-producto",o)},"Eliminar",8,fs)])]))),128))])])])):Bn("",!0)])}],["__scopeId","data-v-e00658b9"]]),ms={class:"cliente-selector"},gs={class:"form-group"},bs={style:{position:"relative"}},vs={key:0,class:"dropdown-clientes"},ys=["onClick"],Cs={style:{"font-size":"12px",color:"#666"}},Ss={key:0,style:{"margin-left":"10px"}},Ds={key:1,class:"dropdown-empty"},_s={key:0,style:{"margin-top":"15px",padding:"10px",background:"#e8f5e9","border-radius":"4px",border:"1px solid #4caf50"}},Ps={style:{"margin-top":"5px"}},Is={style:{"font-size":"12px",color:"#666","margin-top":"3px"}},xs={key:0,style:{"margin-left":"10px"}};const ws=Qr({name:"ClienteSelector",props:{clientes:{type:Array,default:()=>[]},clienteSeleccionado:{type:Object,default:null}},emits:["select-cliente"],data:()=>({busquedaCliente:"",busquedaDebounced:"",mostrarDropdown:!1}),created(){this.debouncedBusqueda=Zr(e=>{this.busquedaDebounced=e},300)},watch:{busquedaCliente(e){this.debouncedBusqueda(e)}},computed:{clientesFiltrados(){if(!this.busquedaDebounced.trim())return this.clientes;const e=this.busquedaDebounced.toLowerCase().replace(/[-\s]/g,"");return this.clientes.filter(t=>{var o,n;const r=(t.razonSocial||"").toLowerCase(),s=(t.nombre||"").toLowerCase(),i=Wr(t.cuit||(null==(o=t.identificacionTributaria)?void 0:o.numero)||"").replace(/[-\s]/g,"").toLowerCase(),a=(t.cuit||(null==(n=t.identificacionTributaria)?void 0:n.numero)||"").replace(/[-\s]/g,"").toLowerCase();return r.includes(e)||s.includes(e)||i.includes(e)||a.includes(e)})}},methods:{formatearCUIT:Wr,seleccionarCliente(e){this.$emit("select-cliente",e),this.busquedaCliente="",this.mostrarDropdown=!1},ocultarDropdown(){setTimeout(()=>{this.mostrarDropdown=!1},200)}}},[["render",function(e,t,o,n,r,s){var i;return $n(),Fn("div",ms,[Gn("div",gs,[t[5]||(t[5]=Gn("label",{for:"selectorCliente"}," Buscar Cliente:",-1)),Gn("div",bs,[qt(Gn("input",{type:"text",id:"selectorCliente","onUpdate:modelValue":t[0]||(t[0]=e=>r.busquedaCliente=e),onInput:t[1]||(t[1]=e=>r.mostrarDropdown=!0),onFocus:t[2]||(t[2]=e=>r.mostrarDropdown=!0),onBlur:t[3]||(t[3]=(...e)=>s.ocultarDropdown&&s.ocultarDropdown(...e)),placeholder:"Buscar por CUIT, razn social o nombre...",style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},null,544),[[Ur,r.busquedaCliente]]),r.mostrarDropdown&&s.clientesFiltrados.length>0?($n(),Fn("div",vs,[($n(!0),Fn(xn,null,Io(s.clientesFiltrados,e=>{var t;return $n(),Fn("div",{key:e.cliente_id||e.id||e.ID,onClick:t=>s.seleccionarCliente(e),class:"dropdown-item"},[Gn("div",null,[Gn("strong",null,J(e.razonSocial||e.nombre||"Sin nombre"),1),Gn("div",Cs,[qn(" CUIT: "+J(s.formatearCUIT(e.cuit||(null==(t=e.identificacionTributaria)?void 0:t.numero)||"")||"N/A")+" ",1),e.cliente_id||e.id||e.ID?($n(),Fn("span",Ss," | ID: "+J(e.cliente_id||e.id||e.ID),1)):Bn("",!0)])])],8,ys)}),128))])):Bn("",!0),r.mostrarDropdown&&0===s.clientesFiltrados.length&&r.busquedaCliente.trim()?($n(),Fn("div",Ds,[...t[4]||(t[4]=[Gn("div",{style:{color:"#666","text-align":"center"}},"No se encontraron clientes",-1)])])):Bn("",!0)])]),o.clienteSeleccionado?($n(),Fn("div",_s,[t[6]||(t[6]=Gn("strong",null," Cliente Seleccionado:",-1)),Gn("div",Ps,[Gn("strong",null,J(o.clienteSeleccionado.razonSocial||o.clienteSeleccionado.nombre||"Sin nombre"),1),Gn("div",Is,[qn(" CUIT: "+J(s.formatearCUIT(o.clienteSeleccionado.cuit||(null==(i=o.clienteSeleccionado.identificacionTributaria)?void 0:i.numero)||"")||"N/A")+" ",1),o.clienteSeleccionado.cliente_id||o.clienteSeleccionado.id||o.clienteSeleccionado.ID?($n(),Fn("span",xs," | ID: "+J(o.clienteSeleccionado.cliente_id||o.clienteSeleccionado.id||o.clienteSeleccionado.ID),1)):Bn("",!0)])])])):Bn("",!0)])}],["__scopeId","data-v-86d33381"]]),ks=((...e)=>{const t=(Br||(Br=vn(qr))).createApp(...e),{mount:o}=t;return t.mount=e=>{const n=function(e){if(m(e)){return document.querySelector(e)}return e}(e);if(!n)return;const r=t._component;h(r)||r.render||r.template||(r.template=n.innerHTML),1===n.nodeType&&(n.textContent="");const s=o(n,!1,function(e){if(e instanceof SVGElement)return"svg";if("function"==typeof MathMLElement&&e instanceof MathMLElement)return"mathml"}(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),s},t})({data:()=>({accessToken:null,tokenExpiration:null,clientId:"",secretId:"",guardarCredenciales:!0,tokenResult:{message:"",type:"",visible:!1},facturaClienteId:"",facturaTipoimpresion:"1",facturaCotizacion:"1",facturaMoneda:"ARS",monedasList:[],facturaObservacion:"CC ARS 261-6044134-3 // CBU 0270261410060441340032 // ALIAS corvus.super// Razn Social CORVUSWEB SRL CUIT 30-71241712-5",modoAvanzado:!1,facturaCondicionPago:1,facturaFechaVto:"",facturaJson:"",facturaResult:{message:"",type:"",visible:!1},facturaPdfViewerHtml:"",facturaPdfViewerVisible:!1,cobranzaClienteId:"",cobranzaIdComprobante:"",cobranzaImporte:"",cobranzaTipoimpresion:"1",cobranzaJson:"",facturasPendientes:[],mostrarFacturasPendientes:!1,facturaParaCobrar:null,cobranzaFormaPago:"efectivo",cobranzaCuentaId:null,cuentasDisponibles:[],cobranzaResult:{message:"",type:"",visible:!1},cobranzaPdfViewerHtml:"",cobranzaPdfViewerVisible:!1,transaccionId:"",tipoimpresion:"1",pdfResult:{message:"",type:"",visible:!1},pdfViewerHtml:"",pdfViewerVisible:!1,facturasList:[],facturasListResult:{message:"",type:"",visible:!1},facturaSeleccionada:null,productosList:[],productosListResult:{message:"",type:"",visible:!1},listaPrecioAGDP:null,productosSeleccionados:[],busquedaProducto:"",mostrarDropdownProductos:!1,clientesList:[],clientesListResult:{message:"",type:"",visible:!1},busquedaCliente:"",mostrarDropdownClientes:!1,clienteSeleccionado:null,clienteSeleccionadoParaFactura:null,cotizacionActualizada:null,centrosDeCosto:[],depositos:[],vendedores:[],circuitosContables:[],puntosDeVenta:[],valoresCargados:!1,isLoading:!1,loadingContext:"",xubioClient:null}),computed:{tokenValido(){return this.accessToken&&this.tokenExpiration&&Date.now()<this.tokenExpiration-6e4},totalProductosSeleccionados(){return this.productosSeleccionados.reduce((e,t)=>e+(parseFloat(t.cantidad)||0)*(parseFloat(t.precio)||0),0)},centroDeCostoSeleccionado(){const e=this.obtenerCentroDeCostoPorDefecto();return{id:e.ID||e.id,nombre:e.nombre||"No disponible",codigo:e.codigo||""}},depositoSeleccionado(){const e=this.obtenerDepositoPorDefecto();return e?{id:e.ID||e.id,nombre:e.nombre||"No disponible",codigo:e.codigo||""}:{nombre:"No disponible",codigo:""}},vendedorSeleccionado(){const e=this.obtenerVendedorPorDefecto();return{id:e.ID||e.id,nombre:e.nombre||"No disponible",codigo:e.codigo||""}},puntoVentaSeleccionado(){const e=this.obtenerPuntoVentaPorDefecto();return{id:e.ID||e.id,nombre:e.nombre||"No disponible",codigo:e.codigo||""}},circuitoContableSeleccionado(){const e=this.obtenerCircuitoContablePorDefecto();return{id:e.ID||e.id,nombre:e.nombre||"No disponible",codigo:e.codigo||""}},subtotalSinIVA(){return this.productosSeleccionados.reduce((e,t)=>e+(parseFloat(t.cantidad)||0)*(parseFloat(t.precio)||0)/1.21,0)},totalIVA(){return this.productosSeleccionados.reduce((e,t)=>{const o=(parseFloat(t.cantidad)||0)*(parseFloat(t.precio)||0);return e+(o-o/1.21)},0)},fechaVencimiento:()=>(new Date).toISOString().split("T")[0]},async mounted(){this.xubioClient=Kr(e=>this.obtenerToken(e),()=>this.tokenValido,()=>this.accessToken);const e=localStorage.getItem("xubio_clientId"),t=localStorage.getItem("xubio_secretId");e&&(this.clientId=e),t&&(this.secretId=t);const o=localStorage.getItem("xubio_token"),n=localStorage.getItem("xubio_tokenExpiration");o&&n&&Date.now()<parseInt(n)-6e4?(this.accessToken=o,this.tokenExpiration=parseInt(n),this.mostrarResultado("token",` Token cargado desde localStorage (vlido hasta ${new Date(this.tokenExpiration).toLocaleString()})\n\n Si el token expir, haz clic en "Obtener Token" para renovarlo.`,"success")):e&&t?await this.obtenerToken():this.mostrarResultado("token",' Ingresa tus credenciales de Xubio y haz clic en "Obtener Token"\n\n Las credenciales estn en el archivo .xubio-credentials.md',"info"),this.limpiarCachesExpirados(),this.facturaFechaVto=(new Date).toISOString().split("T")[0],(this.accessToken||e&&t)&&setTimeout(async()=>{if(this.accessToken)try{await this.obtenerCotizacionBCRA(!0)}catch(e){console.warn(" No se pudo obtener cotizacin automticamente:",e)}},2e3)},components:{ProductoSelector:hs,ClienteSelector:ws},methods:{getCachedData:e=>Jr.getCachedData(e),setCachedData:(e,t,o)=>Jr.setCachedData(e,t,o),invalidarCache:e=>Jr.invalidarCache(e),limpiarCachesExpirados:()=>Jr.limpiarCachesExpirados(),limpiarTodosLosCaches(){return this.clientesList=[],this.productosList=[],this.listaPrecioAGDP=null,Jr.limpiarTodosLosCaches()},getTTL:e=>Jr.getTTL(e),formatoMensaje:e=>function(e){return e?e.replace(/\n/g,"<br>"):""}(e),mostrarResultado(e,t,o){const n=this[`${e}Result`];n.message=t,n.type=o,n.visible=!0},handleError(e,t,o){console.error(` Error en ${t}:`,e);const n=e.message||"Error desconocido";this.mostrarResultado(o,` Error en ${t}:\n\n${n}\n\n Revisa la consola del navegador (F12) para ms detalles.`,"error")},async obtenerToken(e=!1){let t=this.clientId.trim(),o=this.secretId.trim();if(t||(t=localStorage.getItem("xubio_clientId")||""),o||(o=localStorage.getItem("xubio_secretId")||""),t&&o)if(e||!this.tokenValido){this.isLoading=!0,this.loadingContext="Obteniendo token...",this.isLoading=!0,this.loadingContext="Obteniendo token...",this.mostrarResultado("token","Obteniendo token...","info");try{const e=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({clientId:t,secretId:o})});let r;console.log(" Token response:",e.status,e.statusText);try{r=await e.json(),console.log(" Token response parsed:",r)}catch(n){console.error(" Error parseando token response:",n);const t=await e.text().catch(()=>"Sin respuesta");throw new Error(`Error parseando respuesta del token: ${n.message}. Respuesta recibida: ${t.substring(0,200)}`)}if(e.ok&&r){this.accessToken=r.access_token||r.token;const e=parseInt(r.expires_in||3600,10);this.tokenExpiration=Date.now()+1e3*e,this.guardarCredenciales&&(localStorage.setItem("xubio_clientId",t),localStorage.setItem("xubio_secretId",o),localStorage.setItem("xubio_token",this.accessToken),localStorage.setItem("xubio_tokenExpiration",this.tokenExpiration.toString())),this.mostrarResultado("token",` Token obtenido exitosamente!\n\nToken: ${this.accessToken.substring(0,50)}...\nExpira en: ${e} segundos\nVlido hasta: ${new Date(this.tokenExpiration).toLocaleString()}`,"success"),this.valoresCargados||await this.cargarValoresConfiguracion(),await this.obtenerMonedas(),await this.obtenerCuentas()}else{const t=` Error obteniendo token:\n\nStatus: ${e.status} ${e.statusText}\n\n${r.error||r.message||"Error desconocido"}\n\n Revisa la consola del navegador (F12) para ms detalles.`;this.mostrarResultado("token",t,"error")}}catch(r){this.handleError(r,"Obtencin de token","token")}finally{this.isLoading=!1,this.loadingContext=""}}else this.mostrarResultado("token"," Token an vlido, no es necesario renovarlo","success");else this.mostrarResultado("token","Error: Completa Client ID y Secret ID","error")},limpiarCredenciales(){(function(){const e={accessToken:null,tokenExpiration:null,clientId:"",secretId:"",guardarCredenciales:!0};function t(){return e.accessToken&&e.tokenExpiration&&Date.now()<e.tokenExpiration-6e4}return{state:e,tokenValido:t,obtenerToken:async function(o=!1,n,r,s,i,a){let c=e.clientId.trim(),l=e.secretId.trim();if(c||(c=localStorage.getItem("xubio_clientId")||""),l||(l=localStorage.getItem("xubio_secretId")||""),c&&l)if(o||!t()){n&&n("token","Obteniendo token...","info");try{const t=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({clientId:c,secretId:l})});let o;console.log(" Token response:",t.status,t.statusText);try{o=await t.json(),console.log(" Token response parsed:",o)}catch(u){console.error(" Error parseando token response:",u);const e=await t.text().catch(()=>"Sin respuesta"),o=u instanceof Error?u.message:String(u);throw new Error(`Error parseando respuesta del token: ${o}. Respuesta recibida: ${e.substring(0,200)}`)}if(t.ok&&o){e.accessToken=o.access_token||o.token||null;const t=parseInt(o.expires_in||"3600",10);return e.tokenExpiration=Date.now()+1e3*t,e.guardarCredenciales&&e.accessToken&&e.tokenExpiration&&(localStorage.setItem("xubio_clientId",c),localStorage.setItem("xubio_secretId",l),localStorage.setItem("xubio_token",e.accessToken),localStorage.setItem("xubio_tokenExpiration",e.tokenExpiration.toString())),n&&e.accessToken&&e.tokenExpiration&&n("token",` Token obtenido exitosamente!\n\nToken: ${e.accessToken.substring(0,50)}...\nExpira en: ${t} segundos\nVlido hasta: ${new Date(e.tokenExpiration).toLocaleString()}`,"success"),s&&await s(),i&&await i(),a&&await a(),e.accessToken}{const e=` Error obteniendo token:\n\nStatus: ${t.status} ${t.statusText}\n\n${o.error||o.message||"Error desconocido"}\n\n Revisa la consola del navegador (F12) para ms detalles.`;n&&n("token",e,"error")}}catch(d){throw console.error(" Error obteniendo token:",d),r&&r(d,"Obtencin de token","token"),d}}else n&&n("token"," Token an vlido, no es necesario renovarlo","success");else n&&n("token","Error: Completa Client ID y Secret ID","error")},limpiarCredenciales:function(){localStorage.removeItem("xubio_clientId"),localStorage.removeItem("xubio_secretId"),localStorage.removeItem("xubio_token"),localStorage.removeItem("xubio_tokenExpiration"),e.clientId="",e.secretId="",e.accessToken=null,e.tokenExpiration=null},cargarCredenciales:function(){const t=localStorage.getItem("xubio_clientId"),o=localStorage.getItem("xubio_secretId");t&&(e.clientId=t),o&&(e.secretId=o);const n=localStorage.getItem("xubio_token"),r=localStorage.getItem("xubio_tokenExpiration");return!!(n&&r&&Date.now()<parseInt(r)-6e4)&&(e.accessToken=n||null,e.tokenExpiration=parseInt(r)||null,!0)}}})().limpiarCredenciales(),this.clientId="",this.secretId="",this.accessToken=null,this.tokenExpiration=null,this.mostrarResultado("token"," Credenciales y token eliminados del almacenamiento local","success")},async requestXubio(e,t="GET",o=null,n=null){return this.xubioClient||(this.xubioClient=Kr(e=>this.obtenerToken(e),()=>this.tokenValido,()=>this.accessToken)),this.xubioClient.requestXubio(e,t,o,n)},async obtenerPDF(e=null,t=null,o="pdf"){if(!this.accessToken)return void alert("Primero obtn un token de acceso");const n=e||this.transaccionId.trim(),r=t||this.tipoimpresion.trim(),s="factura"===o?"factura":"cobranza"===o?"cobranza":"pdf",i=`${s}PdfViewer`;if(!n||!r)return void this.mostrarResultado(s,"Error: Completa Transaction ID y Tipo Impresin","error");const a=parseInt(n,10),c=parseInt(r,10);if(isNaN(a)||a<=0)this.mostrarResultado(s,"Error: Transaction ID debe ser un nmero mayor a 0","error");else if(isNaN(c)||c<=0)this.mostrarResultado(s,"Error: Tipo Impresin debe ser un nmero mayor a 0","error");else{this.isLoading=!0,this.loadingContext="Obteniendo PDF...",this.mostrarResultado(s,"Obteniendo PDF...","info"),this[`${i}Visible`]=!1;try{const{response:e,data:t}=await this.requestXubio("/imprimirPDF","GET",null,{idtransaccion:a,tipoimpresion:c});if(e.ok&&t.urlPdf){let e=" PDF obtenido exitosamente!\n\n";e+=`URL PDF: ${t.urlPdf}\n`,e+=`Nombre XML: ${t.nombrexml||"N/A"}\n`,e+=`DataSource: ${t.datasource||"N/A"}\n\n`,e+=`Respuesta completa:\n${JSON.stringify(t,null,2)}`,this.mostrarResultado(s,e,"success"),this[`${i}Html`]=`\n            <div style="padding: 10px; background: #f0f0f0; display: flex; justify-content: space-between; align-items: center;">\n              <strong>Vista previa del PDF</strong>\n              <div>\n                <a href="${t.urlPdf}" download style="margin-right: 10px; color: #2196F3; text-decoration: none;"> Descargar</a>\n                <a href="${t.urlPdf}" target="_blank" style="color: #2196F3; text-decoration: none;"> Abrir en nueva pestaa</a>\n              </div>\n            </div>\n            <iframe src="${t.urlPdf}"></iframe>\n          `,this[`${i}Visible`]=!0}else this.mostrarResultado(s,` Error ${e.status}:\n${JSON.stringify(t,null,2)}`,"error")}catch(l){this.handleError(l,"Obtencin de PDF",s)}finally{this.isLoading=!1,this.loadingContext=""}}},probarTipo(e){this.tipoimpresion=e.toString(),this.obtenerPDF()},async flujoCompletoFactura(){var e,t;if(!this.accessToken)return void alert("Primero obtn un token de acceso");let o=this.facturaClienteId.trim();if(o&&o.match(/^\d{2}-\d{8}-\d{1}$/)){const e=o.replace(/\D/g,""),t=this.clientesList.find(t=>{var o;return(t.cuit||(null==(o=t.identificacionTributaria)?void 0:o.numero)||"").replace(/\D/g,"")===e});if(t)o=(t.cliente_id||t.id||t.ID).toString(),this.facturaClienteId=o,this.clienteSeleccionado=t,this.clienteSeleccionadoParaFactura=t;else try{const{response:t,data:n}=await this.requestXubio("/clienteBean","GET",null,{activo:1,numeroIdentificacion:e});if(!(t.ok&&Array.isArray(n)&&n.length>0))return void this.mostrarResultado("factura",`Error: No se encontr un cliente con CUIT ${o}. Asegrate de haber listado los clientes primero.`,"error");{const e=n[0];o=(e.cliente_id||e.id||e.ID).toString(),this.facturaClienteId=o,this.clienteSeleccionado=e,this.clienteSeleccionadoParaFactura=e}}catch(n){return void this.mostrarResultado("factura",`Error: No se pudo buscar el cliente con CUIT ${o}. ${n.message}`,"error")}}if(o)if(this.facturaJson.trim()||0!==this.productosSeleccionados.length){this.isLoading=!0,this.loadingContext="Creando factura...",this.mostrarResultado("factura","Creando factura...","info"),this.facturaPdfViewerVisible=!1;try{let n;if(this.facturaJson.trim())n=JSON.parse(this.facturaJson);else{const[e]=await Promise.all([this.obtenerDatosCliente(parseInt(o))]),t=this.productosSeleccionados.map(e=>{var t,o,n,r,s,i,a,c,l,u,d,p;const f=parseFloat(e.cantidad)||1,h=parseFloat(e.precio)||0,m=f*h,g=m-m/(1+((null==(o=null==(t=e.producto)?void 0:t.tasaIva)?void 0:o.porcentaje)||(null==(r=null==(n=e.producto)?void 0:n.tasaIVA)?void 0:r.porcentaje)||(null==(s=e.producto)?void 0:s.porcentajeIVA)||21)/100),b=m,v=e.producto_id||(null==(i=e.producto)?void 0:i.productoid)||(null==(a=e.producto)?void 0:a.id)||(null==(c=e.producto)?void 0:c.ID),y={cantidad:f,precio:h,descripcion:(null==(l=e.producto)?void 0:l.descripcion)||(null==(u=e.producto)?void 0:u.nombre)||"Producto sin descripcin",producto:v?{ID:v,id:v,nombre:(null==(d=e.producto)?void 0:d.nombre)||"",codigo:(null==(p=e.producto)?void 0:p.codigo)||""}:void 0,iva:parseFloat(g.toFixed(2)),importe:parseFloat(m.toFixed(2)),total:parseFloat(b.toFixed(2)),montoExento:0,porcentajeDescuento:0,centroDeCosto:this.obtenerCentroDeCostoPorDefecto()},C=this.obtenerDepositoPorDefecto();return C&&(y.deposito=C),y}),r=(new Date).toISOString().split("T")[0];if(n={circuitoContable:this.obtenerCircuitoContablePorDefecto(),comprobante:1,tipo:1,cliente:{cliente_id:parseInt(o)},fecha:r,fechaVto:this.facturaFechaVto||r,condicionDePago:parseInt(this.facturaCondicionPago)||1,puntoVenta:this.obtenerPuntoVentaPorDefecto(),vendedor:this.obtenerVendedorPorDefecto(),transaccionProductoItems:t,cantComprobantesCancelados:0,cantComprobantesEmitidos:0,cbuinformada:!1,cotizacionListaDePrecio:1,descripcion:"",externalId:"",facturaNoExportacion:!1,listaDePrecio:null,mailEstado:"",nombre:"",numeroDocumento:"",porcentajeComision:0,provincia:null,transaccionCobranzaItems:[],transaccionPercepcionItems:[]},"USD"===this.facturaMoneda||this.facturaMoneda&&"ARS"!==this.facturaMoneda){const e=this.monedasList.find(e=>e.codigo===this.facturaMoneda||"USD"===e.codigo)||await this.obtenerMoneda(this.facturaMoneda);if(e){n.moneda={ID:e.ID||e.id,codigo:e.codigo,nombre:e.nombre};const t=parseFloat(this.facturaCotizacion)||1;n.cotizacion=t>0?t:1,n.utilizaMonedaExtranjera=1}}if(this.facturaObservacion&&this.facturaObservacion.trim()?n.observacion=this.facturaObservacion.trim():n.observacion="",e&&e.identificacionTributaria){const t=e.identificacionTributaria.numero||e.cuit;t&&(n.cliente.identificacionTributaria||(n.cliente.identificacionTributaria={}),n.cliente.identificacionTributaria.numero=t)}}console.log(" Payload de factura:",JSON.stringify(n,null,2));const{response:r,data:s}=await this.requestXubio("/comprobanteVentaBean","POST",n);if(r.ok){const o=s.transaccionId||s.transaccionid||s.id;let n=" Factura creada exitosamente!\n\n";n+=" Detalles:\n",n+=` Transaction ID: ${o}\n`,n+=` Nmero: ${s.numeroComprobante||s.numero||"N/A"}\n`,n+=` Cliente: ${(null==(e=this.clienteSeleccionadoParaFactura)?void 0:e.razonSocial)||(null==(t=this.clienteSeleccionadoParaFactura)?void 0:t.nombre)||"N/A"}\n`,n+=` Total: $${this.formatearPrecio(this.totalProductosSeleccionados)} ${this.facturaMoneda}\n`,n+=` Moneda: ${this.facturaMoneda}\n\n`,n+="Obteniendo PDF...\n\n",this.mostrarResultado("factura",n,"success"),await this.obtenerPDF(o,this.facturaTipoimpresion,"factura")}else this.mostrarResultado("factura",` Error ${r.status}:\n${JSON.stringify(s,null,2)}`,"error")}catch(n){this.handleError(n,"Flujo completo factura","factura")}finally{this.isLoading=!1,this.loadingContext=""}}else this.mostrarResultado("factura","Error: Selecciona al menos un producto o proporciona un JSON de factura","error");else this.mostrarResultado("factura","Error: Completa Cliente ID o selecciona un cliente de la lista","error")},async soloCrearFactura(){if(!this.accessToken)return void alert("Primero obtn un token de acceso");let e=this.facturaClienteId.trim();if(e&&e.match(/^\d{2}-\d{8}-\d{1}$/)){const o=e.replace(/\D/g,""),n=this.clientesList.find(e=>{var t;return(e.cuit||(null==(t=e.identificacionTributaria)?void 0:t.numero)||"").replace(/\D/g,"")===o});if(n)e=(n.cliente_id||n.id||n.ID).toString(),this.facturaClienteId=e,this.clienteSeleccionadoParaFactura=n;else try{const{response:t,data:n}=await this.requestXubio("/clienteBean","GET",null,{activo:1,numeroIdentificacion:o});if(!(t.ok&&Array.isArray(n)&&n.length>0))return void this.mostrarResultado("factura",`Error: No se encontr un cliente con CUIT ${e}. Asegrate de haber listado los clientes primero.`,"error");{const t=n[0];e=(t.cliente_id||t.id||t.ID).toString(),this.facturaClienteId=e,this.clienteSeleccionadoParaFactura=t}}catch(t){return void this.mostrarResultado("factura",`Error: No se pudo buscar el cliente con CUIT ${e}. ${t.message}`,"error")}}if(e){this.mostrarResultado("factura","Creando factura...","info");try{let t;if(this.facturaJson.trim())t=JSON.parse(this.facturaJson);else{const o=(new Date).toISOString().split("T")[0];t={circuitoContable:this.obtenerCircuitoContablePorDefecto(),comprobante:1,tipo:1,cliente:{cliente_id:parseInt(e)},fecha:o,fechaVto:o,condicionDePago:1,puntoVenta:this.obtenerPuntoVentaPorDefecto(),vendedor:this.obtenerVendedorPorDefecto(),transaccionProductoItems:[{cantidad:1,precio:100,descripcion:"Producto de prueba",iva:parseFloat((100-100/1.21).toFixed(2)),importe:100,total:100,montoExento:0,porcentajeDescuento:0,centroDeCosto:this.obtenerCentroDeCostoPorDefecto()}],cantComprobantesCancelados:0,cantComprobantesEmitidos:0,cbuinformada:!1,cotizacionListaDePrecio:1,descripcion:"",externalId:"",facturaNoExportacion:!1,listaDePrecio:null,mailEstado:"",nombre:"",numeroDocumento:"",porcentajeComision:0,provincia:null,transaccionCobranzaItems:[],transaccionPercepcionItems:[]}}const{response:o,data:n}=await this.requestXubio("/comprobanteVentaBean","POST",t);if(o.ok){const e=n.transaccionId||n.transaccionid||n.id;let t=" Factura creada exitosamente!\n\n";t+=`Transaction ID: ${e}\n`,t+=`ID: ${n.id||n.ID||"N/A"}\n\n`,t+=`Respuesta completa:\n${JSON.stringify(n,null,2)}`,e&&(this.transaccionId=e.toString(),t+='\n\n Transaction ID copiado al campo de "Obtener PDF de Comprobante Existente"'),this.mostrarResultado("factura",t,"success")}else this.mostrarResultado("factura",` Error ${o.status}:\n${JSON.stringify(n,null,2)}`,"error")}catch(t){this.mostrarResultado("factura",` Error: ${t.message}`,"error")}}else this.mostrarResultado("factura","Error: Completa Cliente ID o selecciona un cliente de la lista","error")},async flujoCompletoCobranza(){var e;if(!this.accessToken)return void alert("Primero obtn un token de acceso");const t=this.cobranzaClienteId.trim(),o=this.cobranzaIdComprobante.trim(),n=this.cobranzaImporte.trim();if(t&&o&&n){this.mostrarResultado("cobranza","Creando cobranza...","info"),this.cobranzaPdfViewerVisible=!1;try{let r;if(this.cobranzaJson.trim())r=JSON.parse(this.cobranzaJson);else{const s=await this.requestXubio(`/comprobanteVentaBean/${o}`,"GET");if(!s.response.ok)throw new Error("No se pudo obtener el comprobante. Verifica el ID.");const i=s.data;r={circuitoContable:i.circuitoContable||{ID:1},cliente:{cliente_id:parseInt(t)},fecha:(new Date).toISOString().split("T")[0],monedaCtaCte:i.moneda||{ID:1},cotizacion:i.cotizacion||1,utilizaMonedaExtranjera:(null==(e=i.moneda)?void 0:e.codigo)&&"PESOS_ARGENTINOS"!==i.moneda.codigo?1:0,transaccionInstrumentoDeCobro:[{cuentaTipo:1,cuenta:{ID:1,id:1},moneda:i.moneda||{ID:1},cotizacion:i.cotizacion||1,importe:parseFloat(n),descripcion:`Cobranza de factura ${o}`}],detalleCobranzas:[{idComprobante:parseInt(o),importe:parseFloat(n)}]}}const{response:s,data:i}=await this.requestXubio("/cobranzaBean","POST",r);if(s.ok){const e=i.transaccionId||i.transaccionid||i.id;let t=" Cobranza creada exitosamente!\n\n";t+=`Transaction ID: ${e}\n`,t+=`ID: ${i.id||i.ID||"N/A"}\n\n`,t+="Obteniendo PDF...\n\n",this.mostrarResultado("cobranza",t,"success"),await this.obtenerPDF(e,this.cobranzaTipoimpresion,"cobranza")}else this.mostrarResultado("cobranza",` Error ${s.status}:\n${JSON.stringify(i,null,2)}`,"error")}catch(r){this.mostrarResultado("cobranza",` Error: ${r.message}`,"error")}}else this.mostrarResultado("cobranza","Error: Completa Cliente ID, ID Comprobante e Importe","error")},async soloCrearCobranza(){var e;if(!this.accessToken)return void alert("Primero obtn un token de acceso");const t=this.cobranzaClienteId.trim(),o=this.cobranzaIdComprobante.trim(),n=this.cobranzaImporte.trim();if(t&&o&&n){this.mostrarResultado("cobranza","Creando cobranza...","info");try{let r;if(this.cobranzaJson.trim())r=JSON.parse(this.cobranzaJson);else{const s=await this.requestXubio(`/comprobanteVentaBean/${o}`,"GET");if(!s.response.ok)throw new Error("No se pudo obtener el comprobante. Verifica el ID.");const i=s.data;r={circuitoContable:i.circuitoContable||{ID:1},cliente:{cliente_id:parseInt(t)},fecha:(new Date).toISOString().split("T")[0],monedaCtaCte:i.moneda||{ID:1},cotizacion:i.cotizacion||1,utilizaMonedaExtranjera:(null==(e=i.moneda)?void 0:e.codigo)&&"PESOS_ARGENTINOS"!==i.moneda.codigo?1:0,transaccionInstrumentoDeCobro:[{cuentaTipo:1,cuenta:{ID:1,id:1},moneda:i.moneda||{ID:1},cotizacion:i.cotizacion||1,importe:parseFloat(n),descripcion:`Cobranza de factura ${o}`}],detalleCobranzas:[{idComprobante:parseInt(o),importe:parseFloat(n)}]}}const{response:s,data:i}=await this.requestXubio("/cobranzaBean","POST",r);if(s.ok){const e=i.transaccionId||i.transaccionid||i.id;let t=" Cobranza creada exitosamente!\n\n";t+=`Transaction ID: ${e}\n`,t+=`ID: ${i.id||i.ID||"N/A"}\n\n`,t+=`Respuesta completa:\n${JSON.stringify(i,null,2)}`,e&&(this.transaccionId=e.toString(),t+='\n\n Transaction ID copiado al campo de "Obtener PDF de Comprobante Existente"'),this.mostrarResultado("cobranza",t,"success")}else this.mostrarResultado("cobranza",` Error ${s.status}:\n${JSON.stringify(i,null,2)}`,"error")}catch(r){this.mostrarResultado("cobranza",` Error: ${r.message}`,"error")}}else this.mostrarResultado("cobranza","Error: Completa Cliente ID, ID Comprobante e Importe","error")},async listarFacturasUltimoMes(){if(this.accessToken){this.mostrarResultado("facturasList","Obteniendo facturas del ltimo mes...","info"),this.facturasList=[];try{const e=new Date,t=new Date;t.setMonth(t.getMonth()-1);const o=t.toISOString().split("T")[0],n=e.toISOString().split("T")[0],{response:r,data:s}=await this.requestXubio("/comprobanteVentaBean","GET",null,{fechaDesde:o,fechaHasta:n});if(r.ok&&Array.isArray(s)){if(0===s.length)return void this.mostrarResultado("facturasList","No se encontraron facturas en el ltimo mes","info");this.facturasList=s.map(e=>{var t;const o=e.id||e.ID||e.transaccionId||e.transaccionid||"",n=e.cliente||{};return{id:o,numero:e.numeroComprobante||e.numero||"",fecha:e.fecha||"",cuit:n.cuit||n.CUIT||(null==(t=n.identificacionTributaria)?void 0:t.numero)||"",razonSocial:n.razonSocial||n.nombre||"",monto:e.importetotal||e.importeTotal||e.total||"0",transaccionId:e.transaccionId||e.transaccionid||o}}),this.mostrarResultado("facturasList",` Se encontraron ${s.length} facturas del ltimo mes`,"success")}else this.mostrarResultado("facturasList",` Error ${r.status}:\n${JSON.stringify(s,null,2)}`,"error")}catch(e){this.mostrarResultado("facturasList",` Error: ${e.message}`,"error")}}else alert("Primero obtn un token de acceso")},seleccionarFactura(e){this.transaccionId=e.transaccionId.toString(),this.cobranzaIdComprobante=e.id.toString(),this.facturaSeleccionada=e.id,this.mostrarResultado("facturasList",` Factura seleccionada:\nID: ${e.id}\nTransaction ID: ${e.transaccionId}\nCliente: ${e.razonSocial}\nCUIT: ${e.cuit}\nMonto: $${parseFloat(e.monto).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}\n\n El ID se copi a los campos correspondientes.`,"success")},async obtenerListaPrecioAGDP(e=!1){if(!this.accessToken)return null;if(!e&&this.listaPrecioAGDP)return this.listaPrecioAGDP;if(e)this.invalidarCache("listaPrecioAGDP");else{const e=this.getCachedData("listaPrecioAGDP");if(e)return this.listaPrecioAGDP=e,console.log(" Lista de precios AGDP cargada desde cache"),e}try{const{response:e,data:o}=await this.requestXubio("/listaPrecioBean","GET");if(e.ok&&Array.isArray(o)){console.log(" Listas de precios disponibles:",o.map(e=>({nombre:e.nombre,codigo:e.codigo,id:e.id||e.ID||e.listaPrecioID})));const e=o.find(e=>"AGDP"===e.nombre||"AGDP"===e.codigo||e.nombre&&e.nombre.toUpperCase().includes("AGDP")||e.codigo&&e.codigo.toUpperCase().includes("AGDP"));if(e){const o=e.listaPrecioID||e.id||e.ID;if(console.log(" Lista AGDP encontrada:",{nombre:e.nombre,codigo:e.codigo,listaPrecioID:e.listaPrecioID,id:e.id,ID:e.ID,listaIdUsado:o}),o)try{console.log(` Obteniendo detalles de lista de precios con ID: ${o}`);const{response:t,data:n}=await this.requestXubio(`/listaPrecioBean/${o}`,"GET");if(t.ok&&n){this.listaPrecioAGDP={...e,...n},this.setCachedData("listaPrecioAGDP",this.listaPrecioAGDP,this.getTTL("listaPrecios"));const t=Array.isArray(this.listaPrecioAGDP.listaPrecioItem)?this.listaPrecioAGDP.listaPrecioItem.length:0;return console.log(" Lista de precios AGDP con detalles obtenida desde la API:",{nombre:this.listaPrecioAGDP.nombre,listaPrecioID:this.listaPrecioAGDP.listaPrecioID,itemsCount:t,primerItem:t>0?this.listaPrecioAGDP.listaPrecioItem[0]:null}),this.listaPrecioAGDP}console.warn(" Error obteniendo detalles de la lista:",{status:t.status,data:n})}catch(t){console.warn(" No se pudieron obtener detalles de la lista, usando lista bsica:",t)}return this.listaPrecioAGDP=e,this.setCachedData("listaPrecioAGDP",e,this.getTTL("listaPrecios")),console.log(" Lista de precios AGDP encontrada (sin detalles) desde la API:",e),e}return console.warn(" Lista de precios AGDP no encontrada. Listas disponibles:",o.map(e=>({nombre:e.nombre,codigo:e.codigo,id:e.id||e.ID||e.listaPrecioID}))),null}return null}catch(t){return console.error(" Error obteniendo lista de precios:",t),null}},async listarProductos(e=!1){if(this.accessToken)if(!e&&this.productosList.length>0)this.mostrarResultado("productosList",` ${this.productosList.length} productos ya cargados en memoria`,"success");else{if(e)this.invalidarCache("productos");else{const e=this.getCachedData("productos");if(e&&Array.isArray(e)&&e.length>0){this.productosList=e;const t=Math.floor((Date.now()-JSON.parse(localStorage.getItem("xubio_cache_productos")).timestamp)/1e3/60);return this.mostrarResultado("productosList",` ${e.length} productos cargados desde cache (actualizado hace ${t} minutos)\n\n Haz clic en "Actualizar" para obtener datos frescos de la API`,"success"),void this.actualizarProductosEnBackground()}}this.isLoading=!0,this.loadingContext="Obteniendo productos...",this.mostrarResultado("productosList","Obteniendo productos desde la API...","info"),this.productosList=[];try{const{response:e,data:t}=await this.requestXubio("/ProductoVentaBean","GET",null,{activo:1});if(e.ok&&Array.isArray(t)){console.log(` Se obtuvieron ${t.length} productos activos desde la API`),this.listaPrecioAGDP||(console.log(" Cargando lista de precios AGDP..."),await this.obtenerListaPrecioAGDP());const e=await this.enriquecerProductosConPrecios(t);this.productosList=e,this.setCachedData("productos",e,this.getTTL("productos"));const o=e.filter(e=>e.precioAGDP&&e.precioAGDP>0),n=o.length>0?` Se encontraron ${t.length} productos activos (${o.length} con precios de la lista AGDP) - Actualizados desde la API`:` Se encontraron ${t.length} productos activos\n\n No se encontraron precios en la lista AGDP. Verifica que:\n- La lista de precios "AGDP" existe\n- Los productos estn incluidos en la lista\n- Revisa la consola (F12) para ms detalles`;this.mostrarResultado("productosList",n,o.length>0?"success":"info")}else this.mostrarResultado("productosList",` Error ${e.status}:\n${JSON.stringify(t,null,2)}`,"error")}catch(t){this.mostrarResultado("productosList",` Error: ${t.message}`,"error")}finally{this.isLoading=!1,this.loadingContext=""}}else alert("Primero obtn un token de acceso")},async actualizarProductosEnBackground(){try{const{response:e,data:t}=await this.requestXubio("/ProductoVentaBean","GET",null,{activo:1});if(e.ok&&Array.isArray(t)){this.listaPrecioAGDP||await this.obtenerListaPrecioAGDP();const e=await this.enriquecerProductosConPrecios(t);e.length!==this.productosList.length&&(this.productosList=e,this.setCachedData("productos",e,this.getTTL("productos")),console.log(" Productos actualizados en background"))}}catch(e){console.warn(" Error actualizando productos en background:",e)}},async obtenerCotizacionBCRA(e=!1){e||(this.isLoading=!0,this.loadingContext="Obteniendo cotizacin del dlar...",this.mostrarResultado("factura","Obteniendo cotizacin del dlar vendedor del da...","info"));try{const t="https://dolarapi.com/v1/dolares/oficial";console.log(" Obteniendo cotizacin del dlar OFICIAL vendedor:",t);const o=await fetch(t,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`Error ${o.status}: No se pudo obtener la cotizacin del dlar oficial. ${o.statusText}`);const n=await o.json();if(console.log(" Respuesta de dolarapi.com (oficial):",n),n&&n.venta){const t=parseFloat(n.venta);if(!isNaN(t)&&t>0){const o=n.fechaActualizacion?new Date(n.fechaActualizacion).toLocaleDateString("es-AR"):"hoy",r=n.fechaActualizacion?new Date(n.fechaActualizacion).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"}):"";return this.facturaCotizacion=t.toFixed(2),this.cotizacionActualizada=`${o} ${r}`,void(e?console.log(` Cotizacin actualizada automticamente: $${t.toFixed(2)}`):this.mostrarResultado("factura",` Cotizacin OFICIAL vendedor obtenida: $${t.toFixed(2)} (actualizada ${o} ${r})`,"success"))}}throw new Error("No se pudo obtener la cotizacin vendedor. La respuesta no contiene el formato esperado.")}catch(t){console.error(" Error obteniendo cotizacin del dlar:",t),e||this.mostrarResultado("factura",` Error obteniendo cotizacin del dlar:\n\n${t.message}\n\n Puedes ingresar la cotizacin manualmente.`,"error")}finally{e||(this.isLoading=!1,this.loadingContext="")}},async obtenerMonedas(){if(this.accessToken)try{const{response:e,data:t}=await this.requestXubio("/monedaBean","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.monedasList=t,console.log(` ${t.length} monedas cargadas`),t):[]}catch(e){return console.error(" Error obteniendo monedas:",e),[]}},async obtenerMoneda(e="USD"){if(!this.accessToken)return null;const t=this.monedasList.find(t=>{var o;return t.codigo===e||(null==(o=t.codigo)?void 0:o.toUpperCase())===e.toUpperCase()});if(t)return t;try{const{response:t,data:o}=await this.requestXubio("/monedaBean","GET",null,{activo:1});if(t.ok&&Array.isArray(o)){const t=o.find(t=>{var o,n;return t.codigo===e||(null==(o=t.codigo)?void 0:o.toUpperCase())===e.toUpperCase()||(null==(n=t.nombre)?void 0:n.toUpperCase().includes(e.toUpperCase()))});if(t)return console.log(" Moneda encontrada:",t),t}return null}catch(o){return console.error(" Error obteniendo moneda:",o),null}},async cargarValoresConfiguracion(){if(this.accessToken){console.log(" Cargando valores de configuracin...");try{await Promise.all([this.obtenerCentrosDeCosto(),this.obtenerDepositos(),this.obtenerVendedores(),this.obtenerCircuitosContables(),this.obtenerPuntosDeVenta()]),this.valoresCargados=!0,console.log(" Valores de configuracin cargados exitosamente")}catch(e){console.error(" Error cargando valores de configuracin:",e)}}else console.warn(" No hay token, no se pueden cargar valores de configuracin")},async obtenerCentrosDeCosto(){try{const{response:e,data:t}=await this.requestXubio("/centroDeCostoBean","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.centrosDeCosto=t,console.log(` ${t.length} centros de costo cargados`),t):[]}catch(e){return console.error(" Error obteniendo centros de costo:",e),[]}},async obtenerDepositos(){try{const{response:e,data:t}=await this.requestXubio("/depositos","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.depositos=t,console.log(` ${t.length} depsitos cargados`),t):[]}catch(e){return console.error(" Error obteniendo depsitos:",e),[]}},async obtenerVendedores(){try{const{response:e,data:t}=await this.requestXubio("/vendedorBean","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.vendedores=t,console.log(` ${t.length} vendedores cargados`),t):[]}catch(e){return console.error(" Error obteniendo vendedores:",e),[]}},async obtenerCircuitosContables(){try{const{response:e,data:t}=await this.requestXubio("/circuitoContableBean","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.circuitosContables=t,console.log(` ${t.length} circuitos contables cargados`),t):[]}catch(e){return console.error(" Error obteniendo circuitos contables:",e),[]}},async obtenerPuntosDeVenta(){try{const{response:e,data:t}=await this.requestXubio("/puntoVentaBean","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.puntosDeVenta=t,console.log(` ${t.length} puntos de venta cargados`),t):[]}catch(e){return console.error(" Error obteniendo puntos de venta:",e),[]}},obtenerCentroDeCostoPorDefecto(){if(this.centrosDeCosto&&this.centrosDeCosto.length>0){const e=this.centrosDeCosto[0];return{ID:e.ID||e.id||e.centroDeCosto_id||1,id:e.id||e.ID||e.centroDeCosto_id||1,nombre:e.nombre||"",codigo:e.codigo||""}}return{ID:1,id:1}},obtenerDepositoPorDefecto(){if(this.depositos&&this.depositos.length>0){const e=this.depositos[0];return{ID:e.ID||e.id||e.deposito_id||1,id:e.id||e.ID||e.deposito_id||1,nombre:e.nombre||"",codigo:e.codigo||""}}return null},obtenerCircuitoContablePorDefecto(){if(this.circuitosContables&&this.circuitosContables.length>0){const e=this.circuitosContables[0];return{ID:e.circuitoContable_id||e.ID||e.id||1,id:e.id||e.circuitoContable_id||e.ID||1,nombre:e.nombre||"",codigo:e.codigo||""}}return{ID:1}},obtenerPuntoVentaPorDefecto(){if(this.puntosDeVenta&&this.puntosDeVenta.length>0){const e=this.puntosDeVenta[0];return{ID:e.ID||e.id||e.puntoVenta_id||1,id:e.id||e.ID||e.puntoVenta_id||1,nombre:e.nombre||"",codigo:e.codigo||""}}return{ID:1}},obtenerVendedorPorDefecto(){if(this.vendedores&&this.vendedores.length>0){const e=this.vendedores[0];return{ID:e.ID||e.id||e.vendedor_id||1,id:e.id||e.ID||e.vendedor_id||1,nombre:e.nombre||"",codigo:e.codigo||""}}return{ID:1}},async obtenerDatosCliente(e){if(!this.accessToken||!e)return null;try{const{response:t,data:o}=await this.requestXubio(`/clienteBean/${e}`,"GET");return t.ok&&o?(console.log(" Datos del cliente obtenidos:",o),o):null}catch(t){return console.error(" Error obteniendo datos del cliente:",t),null}},async enriquecerProductosConPrecios(e){return e&&Array.isArray(e)?(this.listaPrecioAGDP||await this.obtenerListaPrecioAGDP(),e.map(e=>{const t=this.obtenerPrecioProducto(e);return{...e,precioAGDP:t>0?t:null,precio:t>0?t:null}})):e},obtenerPrecioProducto(e){var t,o,n;if(!this.listaPrecioAGDP||!e)return 0;const r=e.productoid||e.id||e.ID||e.producto_id;if(!r)return console.warn(" Producto sin ID:",e),0;const s=Number(r);if(Array.isArray(this.listaPrecioAGDP.listaPrecioItem)){const e=this.listaPrecioAGDP.listaPrecioItem.find(e=>{if(e.producto){const t=e.producto.productoid||e.producto.id||e.producto.ID;if(!t)return!1;return Number(t)===s||String(t)===String(r)||t===r}return!1});if(e){const t=parseFloat(e.precio);if(t&&t>0)return console.log(` Precio encontrado para producto ${r}:`,t),t}else if(this.listaPrecioAGDP.listaPrecioItem.length>0){const e=this.listaPrecioAGDP.listaPrecioItem[0];console.debug(` Producto ${r} no encontrado en lista. Primer item ejemplo:`,{productoId:(null==(t=e.producto)?void 0:t.productoid)||(null==(o=e.producto)?void 0:o.id)||(null==(n=e.producto)?void 0:n.ID),precio:e.precio})}}else console.warn(" listaPrecioItem no es un array o no existe:",{tieneListaPrecioItem:!!this.listaPrecioAGDP.listaPrecioItem,tipo:typeof this.listaPrecioAGDP.listaPrecioItem,keys:Object.keys(this.listaPrecioAGDP)});if(this.listaPrecioAGDP.precios&&this.listaPrecioAGDP.precios[r]){const e=this.listaPrecioAGDP.precios[r];return"number"==typeof e?e:e.precio||e.valor||0}if(Array.isArray(this.listaPrecioAGDP.items)){const e=this.listaPrecioAGDP.items.find(e=>{if(e.producto){const t=e.producto.productoid||e.producto.id||e.producto.ID;return Number(t)===s||String(t)===String(r)||t===r}return e.producto_id===r||e.idProducto===r});if(e)return e.precio||e.valor||e.importe||0}if(Array.isArray(this.listaPrecioAGDP.detalle)){const e=this.listaPrecioAGDP.detalle.find(e=>{if(e.producto){const t=e.producto.productoid||e.producto.id||e.producto.ID;return Number(t)===s||String(t)===String(r)||t===r}return e.producto_id===r||e.idProducto===r});if(e)return e.precio||e.valor||e.importe||0}return e.precio?e.precio:0},formatearPrecio:e=>Xr(e),calcularIVA(e){const t=(parseFloat(e.cantidad)||0)*(parseFloat(e.precio)||0);return parseFloat((t-t/1.21).toFixed(2))},seleccionarProductoDelDropdown(e){this.agregarProducto(e),this.busquedaProducto="",this.mostrarDropdownProductos=!1},agregarProducto(e){const t=e.productoid||e.id||e.ID||e.producto_id;if(this.productosSeleccionados.some(e=>(e.producto_id||e.producto&&(e.producto.productoid||e.producto.id||e.producto.ID))===t))return void this.mostrarResultado("productosList",` El producto "${e.nombre||e.codigo||"Sin nombre"}" ya est en la lista`,"info");const o=e.precioAGDP||e.precio||this.obtenerPrecioProducto(e)||0,n={producto:e,cantidad:1,precio:o>0?o:0,producto_id:t};this.productosSeleccionados.push(n);const r=o>0?` Producto "${e.nombre||e.codigo||"Sin nombre"}" agregado con precio $${this.formatearPrecio(o)}`:` Producto "${e.nombre||e.codigo||"Sin nombre"}" agregado (precio: $0.00 - editar manualmente)`;this.mostrarResultado("productosList",r,"success")},eliminarProducto(e){this.productosSeleccionados.splice(e,1)},productosFiltrados(){if(!this.busquedaProducto.trim())return this.productosList;const e=this.busquedaProducto.toLowerCase();return this.productosList.filter(t=>{const o=(t.nombre||"").toLowerCase(),n=(t.codigo||"").toLowerCase(),r=(t.descripcion||"").toLowerCase();return o.includes(e)||n.includes(e)||r.includes(e)})},async listarClientes(e=!1){if(this.accessToken)if(!e&&this.clientesList.length>0)this.mostrarResultado("clientesList",` ${this.clientesList.length} clientes ya cargados en memoria`,"success");else{if(e)this.invalidarCache("clientes");else{const e=this.getCachedData("clientes");if(e&&Array.isArray(e)&&e.length>0){this.clientesList=e;const t=Math.floor((Date.now()-JSON.parse(localStorage.getItem("xubio_cache_clientes")).timestamp)/1e3/60);return this.mostrarResultado("clientesList",` ${e.length} clientes cargados desde cache (actualizado hace ${t} minutos)\n\n Haz clic en "Actualizar" para obtener datos frescos de la API`,"success"),void this.actualizarClientesEnBackground()}}this.isLoading=!0,this.loadingContext="Obteniendo clientes...",this.mostrarResultado("clientesList","Obteniendo clientes desde la API...","info");try{const{response:e,data:t}=await this.requestXubio("/clienteBean","GET",null,{activo:1});if(e.ok&&Array.isArray(t)){console.log(` Se obtuvieron ${t.length} clientes activos desde la API`);const e=t.map(e=>{var t;const o=e.cliente_id||e.id||e.ID,n=e.cuit||(null==(t=e.identificacionTributaria)?void 0:t.numero)||e.CUIT||"";return{...e,cliente_id:o,cuit:n,razonSocial:e.razonSocial||e.nombre||"",nombre:e.nombre||e.razonSocial||""}});this.clientesList=e,this.setCachedData("clientes",e,this.getTTL("clientes")),this.mostrarResultado("clientesList",` Se encontraron ${t.length} clientes activos (actualizados desde la API)`,"success")}else this.mostrarResultado("clientesList",` Error ${e.status}:\n${JSON.stringify(t,null,2)}`,"error")}catch(t){this.mostrarResultado("clientesList",` Error: ${t.message}`,"error")}finally{this.isLoading=!1,this.loadingContext=""}}else alert("Primero obtn un token de acceso")},async actualizarClientesEnBackground(){try{const{response:e,data:t}=await this.requestXubio("/clienteBean","GET",null,{activo:1});if(e.ok&&Array.isArray(t)){const e=t.map(e=>{var t;const o=e.cliente_id||e.id||e.ID,n=e.cuit||(null==(t=e.identificacionTributaria)?void 0:t.numero)||e.CUIT||"";return{...e,cliente_id:o,cuit:n,razonSocial:e.razonSocial||e.nombre||"",nombre:e.nombre||e.razonSocial||""}});e.length!==this.clientesList.length&&(this.clientesList=e,this.setCachedData("clientes",e,this.getTTL("clientes")),console.log(" Clientes actualizados en background"))}}catch(e){console.warn(" Error actualizando clientes en background:",e)}},clientesFiltrados(){if(!this.busquedaCliente.trim())return this.clientesList;const e=this.busquedaCliente.toLowerCase().replace(/[-\s]/g,"");return this.clientesList.filter(t=>{var o,n;const r=(t.razonSocial||"").toLowerCase(),s=(t.nombre||"").toLowerCase(),i=this.formatearCUIT(t.cuit||(null==(o=t.identificacionTributaria)?void 0:o.numero)||"").replace(/[-\s]/g,"").toLowerCase(),a=(t.cuit||(null==(n=t.identificacionTributaria)?void 0:n.numero)||"").replace(/[-\s]/g,"").toLowerCase();return r.includes(e)||s.includes(e)||i.includes(e)||a.includes(e)})},seleccionarClienteDelDropdown(e){var t;const o=e.cliente_id||e.id||e.ID;o&&(this.facturaClienteId=o.toString(),this.cobranzaClienteId=o.toString(),this.clienteSeleccionado=e,this.clienteSeleccionadoParaFactura=e,this.busquedaCliente="",this.mostrarDropdownClientes=!1,this.mostrarResultado("clientesList",` Cliente seleccionado: ${e.razonSocial||e.nombre||"Sin nombre"}\nCUIT: ${this.formatearCUIT(e.cuit||(null==(t=e.identificacionTributaria)?void 0:t.numero)||"")||"N/A"}\nID: ${o}\n\n El cliente se asign a la factura.`,"success"))},limpiarClienteFactura(){this.clienteSeleccionadoParaFactura=null,this.facturaClienteId="",this.clienteSeleccionado=null},formatearCUIT:e=>Wr(e),ocultarDropdownProductos(){"undefined"!=typeof window&&window.setTimeout?window.setTimeout(()=>{this.mostrarDropdownProductos=!1},200):this.mostrarDropdownProductos=!1},ocultarDropdownClientes(){"undefined"!=typeof window&&window.setTimeout?window.setTimeout(()=>{this.mostrarDropdownClientes=!1},200):this.mostrarDropdownClientes=!1},async obtenerFacturasPendientes(e){if(this.accessToken&&e){this.isLoading=!0,this.loadingContext="Obteniendo facturas pendientes...";try{const{response:t,data:o}=await this.requestXubio("/comprobantesAsociados","GET",null,{clienteId:parseInt(e),tipoComprobante:1});return t.ok&&Array.isArray(o)?(this.facturasPendientes=o.filter(e=>parseFloat(e.saldo||e.saldoPendiente||e.importeTotal||0)>0),this.mostrarFacturasPendientes=!0,this.mostrarResultado("cobranza",` Se encontraron ${this.facturasPendientes.length} facturas pendientes`,"success"),this.facturasPendientes):(this.mostrarResultado("cobranza",` Error obteniendo facturas: ${JSON.stringify(o,null,2)}`,"error"),[])}catch(t){return this.handleError(t,"Obtencin de facturas pendientes","cobranza"),[]}finally{this.isLoading=!1,this.loadingContext=""}}else this.mostrarResultado("cobranza","Error: Cliente ID requerido","error")},seleccionarFacturaPendiente(e){const t=e.target.value;if(t)try{const e=JSON.parse(t);this.cobranzaIdComprobante=(e.id||e.ID||e.transaccionId).toString(),this.cobranzaImporte=(e.saldo||e.saldoPendiente||e.importeTotal||0).toString(),this.obtenerDatosFactura(this.cobranzaIdComprobante),this.mostrarResultado("cobranza",` Factura seleccionada: ${e.numeroComprobante||e.numero}\nSaldo: $${this.formatearPrecio(parseFloat(this.cobranzaImporte))}`,"success")}catch(o){console.error("Error parseando factura:",o)}else this.facturaParaCobrar=null},async obtenerDatosFactura(e){if(!this.accessToken||!e)return null;try{const{response:t,data:o}=await this.requestXubio(`/comprobanteVentaBean/${e}`,"GET");return t.ok&&o?(this.facturaParaCobrar=o,console.log(" Datos de factura obtenidos:",o),o):(this.facturaParaCobrar=null,null)}catch(t){return console.error(" Error obteniendo datos de factura:",t),this.facturaParaCobrar=null,null}},async obtenerCuentas(){if(!this.accessToken)return[];try{const{response:e,data:t}=await this.requestXubio("/cuenta","GET",null,{activo:1});return e.ok&&Array.isArray(t)?(this.cuentasDisponibles=t.filter(e=>{var t;return"CAJA"===e.tipo||"BANCO"===e.tipo||1===e.tipoCuenta||(null==(t=e.nombre)?void 0:t.toUpperCase().includes("CAJA"))}),console.log(` ${this.cuentasDisponibles.length} cuentas cargadas`),this.cuentasDisponibles):[]}catch(e){return console.error(" Error obteniendo cuentas:",e),[]}},formatearCUITInput(e){const t=e.target,o=t.value;if(("facturaClienteId"===t.id||"cobranzaClienteId"===t.id)&&o&&/^[\d-]+$/.test(o)){const e=o.replace(/\D/g,"");if(e.length>2&&e.length<=11){let n="";n=e.length<=2?e:e.length<=10?`${e.substring(0,2)}-${e.substring(2)}`:`${e.substring(0,2)}-${e.substring(2,10)}-${e.substring(10,11)}`,n!==o&&this.$nextTick(()=>{"facturaClienteId"===t.id?this.facturaClienteId=n:"cobranzaClienteId"===t.id&&(this.cobranzaClienteId=n)})}}}}});ks.config.errorHandler=(e,t,o)=>{var n;if(console.error(" Error global de Vue:",{error:e,component:(null==(n=null==t?void 0:t.$options)?void 0:n.name)||"Unknown",info:o,stack:null==e?void 0:e.stack}),e&&"object"==typeof e&&"message"in e){const t=e.message||"Ha ocurrido un error inesperado";console.warn(" Considera mostrar este error al usuario:",t)}},window.addEventListener("unhandledrejection",e=>{console.error(" Promise rechazada no manejada:",e.reason)}),ks.mount("#app");
